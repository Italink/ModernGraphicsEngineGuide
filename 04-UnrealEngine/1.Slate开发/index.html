
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../0.%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/">
      
      
        <link rel="next" href="../2.%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>1 - Slate 开发 - Modern Graphics Engine Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../Stylesheet/mkdocs_extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-S1J8MN27P8"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-S1J8MN27P8",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-S1J8MN27P8",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  <link rel="stylesheet" href="../../assets/stylesheets/custom.2fa34c39.min.css">

   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="不再显示此消息">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
              </button>
            
            
  加入讨论
  <a href="https://jq.qq.com/?_wv=1027&k=zxLqjaHA">
    <span class="twemoji twitter">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.18 13.54c.58-1.38 1.39-2.4 1.99-2.62-.01-.8.14-1.3.39-1.7 0-.03-.06-.36.16-.77C5.87 4.85 8.21 2 12 2s6.13 2.85 6.28 6.45c.22.41.16.74.16.77.25.4.4.9.39 1.7.6.22 1.41 1.24 1.99 2.63.75 1.76.87 3.45.27 3.75-.41.2-1.06-.3-1.67-1.18-.24.98-.84 1.88-1.69 2.59.9.33 1.48.87 1.48 1.48 0 1-1.58 1.81-3.52 1.81-1.76 0-3.19-.66-3.48-1.5h-.42c-.29.84-1.72 1.5-3.48 1.5-1.94 0-3.52-.81-3.52-1.81 0-.61.58-1.15 1.48-1.48-.85-.71-1.45-1.61-1.69-2.59-.61.88-1.26 1.38-1.67 1.18-.6-.3-.48-1.99.27-3.76"/></svg>
    </span>
    <strong>Q群：128731454</strong>
  </a>
  

          </div>
          
            <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Modern Graphics Engine Guide" class="md-header__button md-logo" aria-label="Modern Graphics Engine Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Modern Graphics Engine Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              1 - Slate 开发
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label=""  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Italink/ModernGraphicsEngineGuide" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  开篇

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../00-C%2B%2B/1.%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8F%91%E5%B1%95%E5%8F%B2/" class="md-tabs__link">
          
  
  
    
  
  C++

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../01-GraphicsAPI/0.%E6%A6%82%E8%BF%B0/" class="md-tabs__link">
          
  
  
    
  
  图形API

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../02-EngineTechnology/0.%E6%B8%B2%E6%9F%93%E6%9E%B6%E6%9E%84/" class="md-tabs__link">
          
  
  
    
  
  引擎技术

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../0.%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/" class="md-tabs__link">
          
  
  
    
  
  Unreal Engine

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../05-OpenSource/UnrealEngine/GaussianSplattingForUnrealEngine/" class="md-tabs__link">
          
  
  
    
  
  开源

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../06-Blog/" class="md-tabs__link">
          
  
  
    
  
  个人博客

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Modern Graphics Engine Guide" class="md-nav__button md-logo" aria-label="Modern Graphics Engine Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Modern Graphics Engine Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Italink/ModernGraphicsEngineGuide" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    开篇
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    C++
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-C%2B%2B/1.%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8F%91%E5%B1%95%E5%8F%B2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0 - 计算机发展史
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-C%2B%2B/2.C%2B%2B%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 - C++基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-C%2B%2B/3.%E5%B7%A5%E5%85%B7%E9%93%BE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 - 工具链
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-C%2B%2B/4.%E5%AE%8F%E3%80%81%E6%A8%A1%E6%9D%BF%E3%80%81%E5%8F%8D%E5%B0%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 - 宏、模板、反射
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-C%2B%2B/5.%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 - 内存管理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-C%2B%2B/6.GUI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 - GUI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    图形API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            图形API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-GraphicsAPI/0.%E6%A6%82%E8%BF%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0 - 概述
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-GraphicsAPI/1.%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 - 基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-GraphicsAPI/2.%E5%9B%BE%E5%BD%A2%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 - 图形渲染管线
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-GraphicsAPI/3.%E7%9D%80%E8%89%B2%E5%99%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 - 着色器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-GraphicsAPI/4.%E7%BC%93%E5%86%B2%E5%8C%BA%E4%B8%8E%E7%BA%B9%E7%90%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 - 缓冲区与纹理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-GraphicsAPI/5.%E4%B8%89%E7%BB%B4%E7%A9%BA%E9%97%B4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 - 3D空间
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-GraphicsAPI/6.%E5%9B%BE%E5%BD%A2%E6%B8%B2%E6%9F%93%E8%BF%9B%E9%98%B6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 - 图形API进阶
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    引擎技术
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            引擎技术
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-EngineTechnology/0.%E6%B8%B2%E6%9F%93%E6%9E%B6%E6%9E%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0 - 渲染架构
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-EngineTechnology/1.%E7%BC%96%E8%BE%91%E5%99%A8%E6%9E%B6%E6%9E%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 - 编辑器架构
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-EngineTechnology/Waitting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 - DebugDraw
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-EngineTechnology/Waitting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 - DebugDraw
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Unreal Engine
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Unreal Engine
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0.%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0 - 基础编程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    1 - Slate 开发
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    1 - Slate 开发
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      基础
    </span>
  </a>
  
    <nav class="md-nav" aria-label="基础">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      基本使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      基本概念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swidget" class="md-nav__link">
    <span class="md-ellipsis">
      SWidget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swindow" class="md-nav__link">
    <span class="md-ellipsis">
      SWindow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      开发流程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      控件一览
    </span>
  </a>
  
    <nav class="md-nav" aria-label="控件一览">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      基础
    </span>
  </a>
  
    <nav class="md-nav" aria-label="基础">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      文本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      颜色
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      图像
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      导航
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      通知
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spanel" class="md-nav__link">
    <span class="md-ellipsis">
      控件容器（SPanel）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="控件容器（SPanel）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      布局与尺寸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      视图
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      停靠窗口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      其他
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      代码参考
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      高级定制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="高级定制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      交互事件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      绘制事件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="绘制事件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fslatebrush" class="md-nav__link">
    <span class="md-ellipsis">
      FSlateBrush
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FSlateBrush">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eslatedraweffect" class="md-nav__link">
    <span class="md-ellipsis">
      ESlateDrawEffect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fslatefontinfo" class="md-nav__link">
    <span class="md-ellipsis">
      FSlateFontInfo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FSlateFontInfo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fontmeasure" class="md-nav__link">
    <span class="md-ellipsis">
      FontMeasure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      性能优化
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slateumg" class="md-nav__link">
    <span class="md-ellipsis">
      从Slate到UMG
    </span>
  </a>
  
    <nav class="md-nav" aria-label="从Slate到UMG">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      生命周期管理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2.%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 - 插件开发
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3.%E7%B2%92%E5%AD%90%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 - 粒子系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4.Niagra%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 - Niagara 性能优化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5.FluidNinja%E6%B5%81%E4%BD%93%E6%8F%92%E4%BB%B6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 - Fluid Ninja 流体插件
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.%E5%BC%80%E6%94%BE%E4%B8%96%E7%95%8C%E5%88%B6%E4%BD%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 - 开放世界制作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7.%E9%9F%B3%E9%A2%91%E5%BC%80%E5%8F%91/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7 - 音频开发
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9.%E5%BC%80%E6%94%BE%E4%B8%96%E7%95%8C%E4%B8%AD%E7%9A%84%E6%A4%8D%E8%A2%AB%E4%BC%98%E5%8C%96%E6%8A%80%E6%9C%AF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    9 - 植被优化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10.LOD%E4%B8%8D%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10 - LOD不完全指南
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12.%E7%A8%8B%E5%BA%8F%E5%8C%96%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12 - 程序化内容管理
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    开源
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            开源
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UnrealEngine
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            UnrealEngine
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-OpenSource/UnrealEngine/GaussianSplattingForUnrealEngine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gaussian Splatting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    C++
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-OpenSource/C%2B%2B/C%2B%2B%E5%8F%8D%E5%B0%84%E7%BC%96%E8%AF%91%E5%99%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C++反射编译器
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Qt
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Qt
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-OpenSource/Qt/%E9%9F%B3%E9%A2%91%E5%8F%AF%E8%A7%86%E5%8C%96%E8%BD%AF%E4%BB%B6-Specinker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    音频可视化软件-Specinker(已闭源)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-OpenSource/Qt/%E9%A2%91%E8%B0%B1%E5%88%86%E6%9E%90%E5%99%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    频谱分析器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-OpenSource/Qt/Qt%E6%8B%9F%E6%80%81%E7%AA%97%E5%8F%A3%E6%BB%A4%E9%95%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Qt拟态窗口滤镜
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-OpenSource/Qt/Qt%E5%B1%8F%E5%B9%95%E5%8F%96%E8%89%B2%E5%99%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Qt屏幕取色器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-OpenSource/Qt/Qt%E6%B8%90%E5%8F%98%E8%B0%83%E8%89%B2%E5%99%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Qt渐变调色器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-OpenSource/Qt/Qt%E6%A1%8C%E9%9D%A2%E7%B2%92%E5%AD%90%E7%89%B9%E6%95%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Qt桌面粒子特效
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-OpenSource/Qt/Qt%E6%A1%8C%E9%9D%A2%E6%B0%B4%E9%9D%A2%E6%B3%A2%E7%BA%B9%E7%89%B9%E6%95%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Qt桌面水面波纹特效
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../06-Blog/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    个人博客
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            个人博客
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    归档
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            归档
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/archive/2024/05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    五月 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/archive/2024/03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    三月 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/archive/2023/12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    十二月 2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/archive/2023/11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    十一月 2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/archive/2023/10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    十月 2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/archive/2023/08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    八月 2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/archive/2023/06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    六月 2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/archive/2023/04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    四月 2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/archive/2023/03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    三月 2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/archive/2023/02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    二月 2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/archive/2020/09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    九月 2020
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/archive/2020/01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    一月 2020
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/archive/2019/11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    十一月 2019
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    分类
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            分类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/category/%E4%B8%AA%E4%BA%BA%E9%9A%8F%E7%AC%94/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    个人随笔
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/category/%E6%95%B4%E6%B4%BB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    整活
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../06-Blog/category/%E6%9D%82%E8%B0%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    杂谈
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      基础
    </span>
  </a>
  
    <nav class="md-nav" aria-label="基础">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      基本使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      基本概念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swidget" class="md-nav__link">
    <span class="md-ellipsis">
      SWidget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swindow" class="md-nav__link">
    <span class="md-ellipsis">
      SWindow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      开发流程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      控件一览
    </span>
  </a>
  
    <nav class="md-nav" aria-label="控件一览">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      基础
    </span>
  </a>
  
    <nav class="md-nav" aria-label="基础">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      文本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      颜色
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      图像
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      导航
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      通知
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spanel" class="md-nav__link">
    <span class="md-ellipsis">
      控件容器（SPanel）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="控件容器（SPanel）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      布局与尺寸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      视图
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      停靠窗口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      其他
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      代码参考
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      高级定制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="高级定制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      交互事件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      绘制事件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="绘制事件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fslatebrush" class="md-nav__link">
    <span class="md-ellipsis">
      FSlateBrush
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FSlateBrush">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eslatedraweffect" class="md-nav__link">
    <span class="md-ellipsis">
      ESlateDrawEffect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fslatefontinfo" class="md-nav__link">
    <span class="md-ellipsis">
      FSlateFontInfo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FSlateFontInfo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fontmeasure" class="md-nav__link">
    <span class="md-ellipsis">
      FontMeasure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      性能优化
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slateumg" class="md-nav__link">
    <span class="md-ellipsis">
      从Slate到UMG
    </span>
  </a>
  
    <nav class="md-nav" aria-label="从Slate到UMG">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      生命周期管理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>1 - Slate 开发</h1>

<p>Slate是UE中提供的UI框架，它的核心理念如下：</p>
<ul>
<li><a href="https://docs.unrealengine.com/5.2/zh-CN/understanding-the-slate-ui-architecture-in-unreal-engine/">Slate 架构|虚幻引擎5.2文档 </a></li>
</ul>
<p>关于UI的一些基础概念，可以了解：</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/605656730">现代图形引擎入门指南（七）— GUI</a></li>
</ul>
<h2 id="_1">基础<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>在UE中，使用Slate，需要了解三个核心结构：</p>
<ul>
<li><strong>FSlateApplication</strong> ：全局单例，所有UI的调度中心。</li>
<li><strong>SWindow</strong> ：顶层窗口，持有跨平台窗口的实例（FGenericWindow），提供窗口相关的配置和操作。</li>
<li><strong>SWidget</strong> ：小部件，划分窗口区域，处理自身区域内的交互和绘制事件。</li>
</ul>
<h3 id="_2">基本使用<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>在UE中，一个简单的Slate使用示例如下：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">Window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SNew</span><span class="p">(</span><span class="n">SWindow</span><span class="p">)</span><span class="w">                         </span><span class="c1">//创建窗口</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="p">.</span><span class="n">ClientSize</span><span class="p">(</span><span class="n">FVector2D</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span><span class="w"> </span><span class="mi">600</span><span class="p">))</span><span class="w">                </span><span class="c1">//设置窗口大小</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="p">[</span><span class="w">                                               </span><span class="c1">//填充窗口内容</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">        </span><span class="n">SNew</span><span class="p">(</span><span class="n">SHorizontalBox</span><span class="p">)</span><span class="w">                        </span><span class="c1">//创建水平盒子</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">        </span><span class="o">+</span><span class="w"> </span><span class="n">SHorizontalBox</span><span class="o">::</span><span class="n">Slot</span><span class="p">()</span><span class="w">                    </span><span class="c1">//添加子控件插槽</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">        </span><span class="p">[</span><span class="w">                                           </span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">            </span><span class="n">SNew</span><span class="p">(</span><span class="n">STextBlock</span><span class="p">)</span><span class="w">                        </span><span class="c1">//创建文本框</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">            </span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">))</span><span class="w">       </span><span class="c1">//设置文本框内容</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">        </span><span class="p">]</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">        </span><span class="o">+</span><span class="w"> </span><span class="n">SHorizontalBox</span><span class="o">::</span><span class="n">Slot</span><span class="p">()</span><span class="w">                    </span><span class="c1">//添加子控件插槽</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">        </span><span class="p">[</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">            </span><span class="n">SNew</span><span class="p">(</span><span class="n">STextBlock</span><span class="p">)</span><span class="w">                        </span><span class="c1">//创建文本框</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">            </span><span class="p">.</span><span class="n">Text_Lambda</span><span class="p">([](){</span><span class="w">                      </span><span class="c1">//设置文本框内容   </span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;Slate&quot;</span><span class="p">);</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">            </span><span class="p">})</span><span class="w">      </span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">        </span><span class="p">]</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">    </span><span class="p">];</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="n">FSlateApplication</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">AddWindow</span><span class="p">(</span><span class="n">Window</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w">   </span><span class="c1">//注册该窗口，并立即显示</span>
</code></pre></div>
<p>Slate的代码风格如下：</p>
<ul>
<li>Slate 控件的类命名一般以 <code>S</code>开头</li>
<li>
<p>可以通过以下函数来快速构建Slate控件：</p>
<ul>
<li><code>SNew( WidgetType, ... )</code>：通用的构造方式</li>
<li><code>SAssignNew( ExposeAs, WidgetType, ... )</code>：构造完成后，把控件赋值给<code>ExposeAs</code></li>
<li><code>SArgumentNew( InArgs, WidgetType, ... )</code>：使用参数集进行构造</li>
</ul>
</li>
<li>
<p>在构造的代码表达式中，可以通过一些函数来设置控件的构造参数，由于这些函数都会返回控件自身的引用，因此可以进行链式调用</p>
<ul>
<li>可以通过<code>operatpr .</code> 调用函数来设置控件的属性和事件</li>
<li>对于 <strong>SPanel</strong> 的子类，可以使用<code>operator +SPanelType::Slot</code>添加子控件的插槽 </li>
<li>对于 <strong>SCompoundWidget</strong> <code>和</code> <strong>SPanel::Slot</strong> ，可以使用<code>operator []</code>来填充子控件</li>
<li>对于Slate的属性和事件，可以通过多种方式绑定，比如上面的<code>.Text(...)</code>设置的是静态值，还可以通过绑定函数来动态获取属性值：<ul>
<li><code>Text_Lambda(...)</code></li>
<li><code>Text_Raw(...)</code></li>
<li><code>Text_Static(...)</code></li>
<li><code>Text_UObject(...)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>控件开发中，我们可以依靠一些经验（合理即存在），以及IDE的辅助来完成代码的编写。</p>
<p><a class="glightbox" href="../Resources/image-20230530153625676.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230530153625676" src="../Resources/image-20230530153625676.png" /></a></p>
<p>Slate可以同时作为 Game UI 和 Editor UI</p>
<p>在Editor中，可以通过如下方式来添加UI：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">Window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SNew</span><span class="p">(</span><span class="n">SWindow</span><span class="p">)</span><span class="w">                         </span><span class="c1">//必须具有一个顶层窗口</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="p">.</span><span class="n">Title</span><span class="p">(</span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;CustomWindow&quot;</span><span class="p">))</span><span class="w">       </span><span class="c1">//设置窗口标题</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="p">.</span><span class="n">ClientSize</span><span class="p">(</span><span class="n">FVector2D</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span><span class="w"> </span><span class="mi">600</span><span class="p">))</span><span class="w">                </span><span class="c1">//设置窗口大小</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="p">[</span><span class="w">                                               </span><span class="c1">//填充窗口内容</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">        </span><span class="n">SNew</span><span class="p">(</span><span class="n">SSpacer</span><span class="p">)</span><span class="w">                               </span><span class="c1">//自身控件，这里是一个空白填充                </span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="p">];</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1">//方法1：注册该窗口，并立即显示</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="n">FSlateApplication</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">AddWindow</span><span class="p">(</span><span class="n">Window</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w">   </span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="c1">//方法2：注册该窗口，不显示，手动调用ShowWindow来显示</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="n">FSlateApplication</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">AddWindow</span><span class="p">(</span><span class="n">Window</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span><span class="w">  </span><span class="c1">//注册该窗口，并立即显示</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="n">Window</span><span class="o">-&gt;</span><span class="n">ShowWindow</span><span class="p">();</span>
</code></pre></div>
<p><a class="glightbox" href="../Resources/image-20230530161318939.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230530161318939" src="../Resources/image-20230530161318939.png" /></a></p>
<p>也可以通过<code>DockTab</code>的方式来添加窗口：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">// 注册Tab页面的生成器</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">FGlobalTabmanager</span><span class="o">::</span><span class="n">Get</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">RegisterTabSpawner</span><span class="p">(</span><span class="n">FName</span><span class="p">(</span><span class="s">&quot;CustomTab&quot;</span><span class="p">),</span><span class="n">FOnSpawnTab</span><span class="o">::</span><span class="n">CreateLambda</span><span class="p">([](</span><span class="k">const</span><span class="w"> </span><span class="n">FSpawnTabArgs</span><span class="o">&amp;</span><span class="w"> </span><span class="n">Args</span><span class="p">){</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">SNew</span><span class="p">(</span><span class="n">SDockTab</span><span class="p">)</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">        </span><span class="p">[</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">            </span><span class="n">SNew</span><span class="p">(</span><span class="n">SSpacer</span><span class="p">)</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">        </span><span class="p">];</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="p">}));</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="n">FGlobalTabmanager</span><span class="o">::</span><span class="n">Get</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">TryInvokeTab</span><span class="p">(</span><span class="n">FTabId</span><span class="p">(</span><span class="s">&quot;CustomTab&quot;</span><span class="p">));</span><span class="w">        </span><span class="c1">//尝试激活Tab页面</span>
</code></pre></div>
<p><a class="glightbox" href="../Resources/image-20230530161340764.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230530161340764" src="../Resources/image-20230530161340764.png" /></a></p>
<p>在Game中，可以通过以下方式来添加UI：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">GEngine</span><span class="o">-&gt;</span><span class="n">GameViewport</span><span class="o">-&gt;</span><span class="n">AddViewportWidgetContent</span><span class="p">(</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">        </span><span class="n">SNew</span><span class="p">(</span><span class="n">SSpacer</span><span class="p">)</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="p">);</span>
</code></pre></div>
<p>GameViewport还有其他接口可用：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">UGameViewportClient</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">UScriptViewportClient</span><span class="p">,</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">FExec</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">AddViewportWidgetContent</span><span class="p">(</span><span class="w"> </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">SWidget</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ViewportContent</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">ZOrder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">RemoveViewportWidgetContent</span><span class="p">(</span><span class="w"> </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">SWidget</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ViewportContent</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">AddViewportWidgetForPlayer</span><span class="p">(</span><span class="n">ULocalPlayer</span><span class="o">*</span><span class="w"> </span><span class="n">Player</span><span class="p">,</span><span class="w"> </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">SWidget</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ViewportContent</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">ZOrder</span><span class="p">);</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">RemoveViewportWidgetForPlayer</span><span class="p">(</span><span class="n">ULocalPlayer</span><span class="o">*</span><span class="w"> </span><span class="n">Player</span><span class="p">,</span><span class="w"> </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">SWidget</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ViewportContent</span><span class="p">);</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">RemoveAllViewportWidgets</span><span class="p">();</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">RebuildCursors</span><span class="p">();</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="p">};</span>
</code></pre></div>
<blockquote>
<p>详见：<a href="https://docs.unrealengine.com/5.2/en-US/using-slate-in-game-in-unreal-engine/">https://docs.unrealengine.com/5.2/en-US/using-slate-in-game-in-unreal-engine/</a></p>
</blockquote>
<h3 id="_3">基本概念<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>对于UI开发，需要了解以下的基础概念：</p>
<ul>
<li><strong>窗口的基本状态</strong> ：激活（Active），焦点（Focus），可见（Visible），模态（Modal），变换（Transform）</li>
<li><strong>布局策略及相关概念</strong> ：<ul>
<li>盒式布局（HBox，VBox），流式布局（Flow），网格布局（Grid），锚式布局（Anchors），重叠布局（Overlap），画布（Canvas）</li>
<li>内边距（Padding），外边距（Margin），间距（Spacing），对齐方式（Alignment）</li>
</ul>
</li>
<li><strong>样式管理</strong> ：图标（Icon），风格（Style），画刷（Brush）</li>
<li><strong>字体管理</strong> ：字体类型（Font Family），文本宽度测量(Font Measure)</li>
<li><strong>尺寸计算</strong> ：控件尺寸计算策略</li>
<li><strong>交互事件</strong> ：鼠标，键盘，拖拽，焦点事件，事件处理机制，鼠标捕获</li>
<li><strong>绘制事件</strong> ：绘制元素，区域裁剪</li>
<li><strong>基本控件</strong> ：标签（Label），按钮（Button），复选框（Check），组合框（Combo），滑动条（Slider），滚动条（Scroll Bar），文本框（Text），对话框（Dialog），颜色选取（Color），菜单栏（Menu Bar），菜单（Menu），状态栏（Status Bar），滚动面板（Scroll ），堆栈（切换）面板（Stack/Switcher），列表面板（List），树形面板（Tree）...</li>
<li><strong>国际化</strong> ：文本本地化翻译（Localization）</li>
</ul>
<p>并了解 UI 框架中有哪些全局数据和操作，在UE中，可以使用输入<code>Get</code>，<code>Set</code>，根据IDE提示简单过一遍：</p>
<blockquote>
<p>这也体现了遵循一定编码规范所带来的好处</p>
</blockquote>
<p><a class="glightbox" href="../Resources/image-20230530165544358.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230530165544358" src="../Resources/image-20230530165544358.png" /></a></p>
<h3 id="swidget">SWidget<a class="headerlink" href="#swidget" title="Permanent link">&para;</a></h3>
<p><strong>SWidget</strong> 是 Slate UI开发过程中，开发者 接触频率最多 的类型，它是所有UI控件的基类</p>
<p>对于开发者而言，需要了解它的基本骨架，知道哪些属性可以调整：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">TAttribute</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="w"> </span><span class="n">EnabledState</span><span class="p">,</span><span class="w">                          </span><span class="c1">//开启状态，指定是否能够与控件交互，如果禁用，则显示为灰色</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">TAttribute</span><span class="o">&lt;</span><span class="n">EVisibility</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Visibility</span><span class="p">,</span><span class="w">                     </span><span class="c1">//可见性策略</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">IToolTip</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ToolTip</span><span class="p">,</span><span class="w">                           </span><span class="c1">//提示框控件</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="n">TAttribute</span><span class="o">&lt;</span><span class="n">FText</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ToolTipText</span><span class="p">,</span><span class="w">                          </span><span class="c1">//提示框文本内容</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="n">TAttribute</span><span class="o">&lt;</span><span class="n">TOptional</span><span class="o">&lt;</span><span class="n">EMouseCursor</span><span class="o">::</span><span class="n">Type</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Cursor</span><span class="p">,</span><span class="w">      </span><span class="c1">//鼠标样式</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="kt">float</span><span class="w"> </span><span class="n">RenderOpacity</span><span class="p">,</span><span class="w">                                    </span><span class="c1">//渲染透明度</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="n">TAttribute</span><span class="o">&lt;</span><span class="n">TOptional</span><span class="o">&lt;</span><span class="n">FSlateRenderTransform</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">Transform</span><span class="p">,</span><span class="w"> </span><span class="c1">//渲染变换</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="n">TAttribute</span><span class="o">&lt;</span><span class="n">FVector2D</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TransformPivot</span><span class="p">,</span><span class="w">                   </span><span class="c1">//渲染变换中心</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="n">FName</span><span class="w"> </span><span class="n">Tag</span><span class="p">,</span><span class="w">                                              </span><span class="c1">//标签</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="kt">bool</span><span class="w"> </span><span class="n">ForceVolatile</span><span class="p">,</span><span class="w">                                     </span><span class="c1">//强制UI失效</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="n">EWidgetClipping</span><span class="w"> </span><span class="n">Clipping</span><span class="p">,</span><span class="w">                               </span><span class="c1">//裁剪策略</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="n">EFlowDirectionPreference</span><span class="w"> </span><span class="n">FlowPreference</span><span class="p">,</span><span class="w">                </span><span class="c1">//UI流向</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="n">TOptional</span><span class="o">&lt;</span><span class="n">FAccessibleWidgetData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">AccessibleData</span><span class="p">,</span><span class="w">        </span><span class="c1">//存储数据</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="n">TArray</span><span class="o">&lt;</span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">ISlateMetaData</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">MetaData</span><span class="w">             </span><span class="c1">//元数据</span>
</code></pre></div>
<blockquote>
<p>详见：<a href="https://docs.unrealengine.com/5.2/zh-CN/slate-ui-widget-examples-for-unreal-engine/">https://docs.unrealengine.com/5.2/zh-CN/slate-ui-widget-examples-for-unreal-engine/</a></p>
</blockquote>
<p>哪些函数可以调用：</p>
<p><a class="glightbox" href="../Resources/image-20230530181510368.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230530181510368" src="../Resources/image-20230530181510368.png" /></a></p>
<p>哪些函数可以进行覆写（Override）：</p>
<p><a class="glightbox" href="../Resources/image-20230530183325442.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230530183325442" src="../Resources/image-20230530183325442.png" /></a></p>
<h3 id="swindow">SWindow<a class="headerlink" href="#swindow" title="Permanent link">&para;</a></h3>
<p><strong>SWindow</strong> 继承自 <strong>SCompoundWidget</strong> ，这样做只是为了让 <strong>SWindow</strong> 能够使用像 <strong>SWidget</strong> 一样的代码风格，它具有以下属性：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">EWindowType</span><span class="w"> </span><span class="n">Type</span><span class="p">;</span><span class="w">                               </span><span class="c1">//窗口类型</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">FWindowStyle</span><span class="w"> </span><span class="n">Style</span><span class="p">;</span><span class="w">                             </span><span class="c1">//窗口样式</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="n">FText</span><span class="w"> </span><span class="n">Title</span><span class="p">;</span><span class="w">                                    </span><span class="c1">//窗口标题</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="kt">float</span><span class="w"> </span><span class="n">InitialOpacity</span><span class="p">;</span><span class="w">                           </span><span class="c1">//初始透明度</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="n">FVector2D</span><span class="w"> </span><span class="n">ScreenPosition</span><span class="w">                        </span><span class="c1">//窗口坐标</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="n">FVector2D</span><span class="w"> </span><span class="n">ClientSize</span><span class="p">;</span><span class="w">                           </span><span class="c1">//窗口客户区域尺寸</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="n">TOptional</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">MinWidth</span><span class="p">;</span><span class="w">                      </span><span class="c1">//最小宽度</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="n">TOptional</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">MinHeight</span><span class="p">;</span><span class="w">                     </span><span class="c1">//最小高度</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="n">TOptional</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">MaxWidth</span><span class="p">;</span><span class="w">                      </span><span class="c1">//最大宽度</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="n">TOptional</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">MaxHeight</span><span class="p">;</span><span class="w">                     </span><span class="c1">//最大高度</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="n">FMargin</span><span class="w"> </span><span class="n">LayoutBorder</span><span class="p">;</span><span class="w">                           </span><span class="c1">//窗口内容的边距</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="n">FMargin</span><span class="w"> </span><span class="n">UserResizeBorder</span><span class="p">;</span><span class="w">                       </span><span class="c1">//调整窗口区域时的响应距离</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="n">EAutoCenter</span><span class="w"> </span><span class="n">AutoCenter</span><span class="p">;</span><span class="w">                         </span><span class="c1">//居中策略</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="n">ESizingRule</span><span class="w"> </span><span class="n">SizingRule</span><span class="p">;</span><span class="w">                         </span><span class="c1">//窗口尺寸处理策略</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="n">FWindowTransparency</span><span class="w"> </span><span class="n">SupportsTransparency</span><span class="p">;</span><span class="w">       </span><span class="c1">//窗口透明度策略</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="n">EWindowActivationPolicy</span><span class="w"> </span><span class="n">ActivationPolicy</span><span class="p">;</span><span class="w">       </span><span class="c1">//激活处理策略</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="kt">bool</span><span class="w"> </span><span class="n">IsInitiallyMaximized</span><span class="p">;</span><span class="w">                      </span><span class="c1">//初始时显示为最大化</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="kt">bool</span><span class="w"> </span><span class="n">IsInitiallyMinimized</span><span class="p">;</span><span class="w">                      </span><span class="c1">//初始时显示为最小化</span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="kt">bool</span><span class="w"> </span><span class="n">IsPopupWindow</span><span class="p">;</span><span class="w">                             </span><span class="c1">//是否是 Pop up 窗口（无任务栏图标）</span>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="kt">bool</span><span class="w"> </span><span class="n">IsTopmostWindow</span><span class="p">;</span><span class="w">                           </span><span class="c1">//是否是置顶窗口</span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="kt">bool</span><span class="w"> </span><span class="n">FocusWhenFirstShown</span><span class="p">;</span><span class="w">                       </span><span class="c1">//首次预览时获得焦点</span>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="kt">bool</span><span class="w"> </span><span class="n">AdjustInitialSizeAndPositionForDPIScale</span><span class="p">;</span><span class="w">   </span><span class="c1">//根据DPI调整窗口初始坐标和尺寸</span>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="kt">bool</span><span class="w"> </span><span class="n">UseOSWindowBorder</span><span class="p">;</span><span class="w">                         </span><span class="c1">//使用操作系统自身的窗口边框</span>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="kt">bool</span><span class="w"> </span><span class="n">HasCloseButton</span><span class="p">;</span><span class="w">                            </span><span class="c1">//是否带有关闭按钮</span>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="kt">bool</span><span class="w"> </span><span class="n">SupportsMaximize</span><span class="p">;</span><span class="w">                          </span><span class="c1">//是否支持最大化</span>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="kt">bool</span><span class="w"> </span><span class="n">SupportsMinimize</span><span class="p">;</span><span class="w">                          </span><span class="c1">//是否支持最小化</span>
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a><span class="kt">bool</span><span class="w"> </span><span class="n">ShouldPreserveAspectRatio</span><span class="p">;</span><span class="w">                 </span><span class="c1">//是否锁定宽高比</span>
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a><span class="kt">bool</span><span class="w"> </span><span class="n">CreateTitleBar</span><span class="p">;</span><span class="w">                            </span><span class="c1">//是否创建标题栏</span>
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a><span class="kt">bool</span><span class="w"> </span><span class="n">SaneWindowPlacement</span><span class="p">;</span><span class="w">                       </span><span class="c1">//是否将窗口约束到屏幕内</span>
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a><span class="kt">bool</span><span class="w"> </span><span class="n">bDragAnywhere</span><span class="p">;</span><span class="w">                             </span><span class="c1">//是否可拖拽到任意位置</span>
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="kt">bool</span><span class="w"> </span><span class="n">bManualManageDPI</span><span class="p">;</span><span class="w">                          </span><span class="c1">//是否手动调整DPI</span>
</code></pre></div>
<p>常用的函数有：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">MoveWindowTo</span><span class="p">(</span><span class="w"> </span><span class="n">FVector2D</span><span class="w"> </span><span class="n">NewPosition</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">ReshapeWindow</span><span class="p">(</span><span class="w"> </span><span class="n">FVector2D</span><span class="w"> </span><span class="n">NewPosition</span><span class="p">,</span><span class="w"> </span><span class="n">FVector2D</span><span class="w"> </span><span class="n">NewSize</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="kt">void</span><span class="w"> </span><span class="nf">ReshapeWindow</span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FSlateRect</span><span class="o">&amp;</span><span class="w"> </span><span class="n">InNewShape</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Resize</span><span class="p">(</span><span class="w"> </span><span class="n">FVector2D</span><span class="w"> </span><span class="n">NewClientSize</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="kt">void</span><span class="w"> </span><span class="nf">MorphToPosition</span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FCurveSequence</span><span class="o">&amp;</span><span class="w"> </span><span class="n">Sequence</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">TargetOpacity</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FVector2D</span><span class="o">&amp;</span><span class="w"> </span><span class="n">TargetPosition</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="kt">void</span><span class="w"> </span><span class="nf">MorphToShape</span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FCurveSequence</span><span class="o">&amp;</span><span class="w"> </span><span class="n">Sequence</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">TargetOpacity</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FSlateRect</span><span class="o">&amp;</span><span class="w"> </span><span class="n">TargetShape</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="kt">void</span><span class="w"> </span><span class="nf">ShowWindow</span><span class="p">();</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="kt">void</span><span class="w"> </span><span class="nf">HideWindow</span><span class="p">();</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="kt">void</span><span class="w"> </span><span class="nf">BringToFront</span><span class="p">(</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">bForce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="kt">void</span><span class="w"> </span><span class="nf">RequestDestroyWindow</span><span class="p">();</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="kt">void</span><span class="w"> </span><span class="nf">EnableWindow</span><span class="p">(</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">bEnable</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Maximize</span><span class="p">();</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Restore</span><span class="p">();</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Minimize</span><span class="p">();</span>
</code></pre></div>
<h3 id="_4">开发流程<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>Slate开发的绝大部分工作内容可以归纳为：</p>
<ul>
<li><strong>设置控件属性</strong></li>
<li><strong>绑定事件逻辑</strong></li>
<li><strong>组织层次结构</strong></li>
</ul>
<p>SWidget 是一个抽象基类，UE根据不同的使用方式，又对其进行派生，划分为四大类：</p>
<ul>
<li>
<p><strong>SCompoundWidget</strong> ：可以设置ChildSlot</p>
<blockquote>
<p>Slate 用来提供给开发者的主要扩展方式，一般继承它是为了利用已有的SWidget来组织一系列的Widget。</p>
</blockquote>
</li>
<li>
<p><strong>SPanel</strong> ：可以看做是SWidget的容器，可以包含一个或多个ChildSlot，用于添加SWidget。</p>
<blockquote>
<p>Slate已经派生了足够多的SPanel，用于组织Slate的布局等各类操作，一般情况下很少对其派生。</p>
</blockquote>
</li>
<li>
<p><strong>SLeafWidget</strong> ：叶子控件，不包含ChildSlot</p>
<blockquote>
<p>派生它，主要是为了自定义一些拥有独特 渲染和尺寸处理机制 的控件</p>
</blockquote>
</li>
<li>
<p><strong>SWeakWidget</strong> ：定义逻辑上的归属而非事件上的。</p>
<blockquote>
<p>SPanel中的SWidget在事件上具有层级关系，但有时会出现一些特殊情况，比如点击按钮打开一个菜单，菜单可以看做是隶属于这个按钮的，但本质上菜单是新开启了一个窗口，它们在事件传递上并不存在层级关系，所以就得靠SWeakWidget来解决这个问题。一般情况下很少使用它。</p>
</blockquote>
</li>
</ul>
<p>大多时候，我们会新增一个C++类，继承自 <strong>SCompoundWidget</strong> ，在<code>Construct</code>函数中填充子控件，就像是这样：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">SCustomWidget</span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">SCompoundWidget</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="p">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="n">SLATE_BEGIN_ARGS</span><span class="p">(</span><span class="n">SCustomWidget</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w">              </span><span class="c1">//定义Slate参数</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="n">SLATE_END_ARGS</span><span class="p">()</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">Construct</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FArguments</span><span class="o">&amp;</span><span class="w"> </span><span class="n">InArgs</span><span class="p">){</span><span class="w">       </span><span class="c1">//使用SNew本质上是调用该函数</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">        </span><span class="n">ChildSlot</span><span class="w">                                   </span><span class="c1">//填充子控件</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">        </span><span class="p">[</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">            </span><span class="n">SNew</span><span class="p">(</span><span class="n">STextBlock</span><span class="p">)</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">            </span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;This is body&quot;</span><span class="p">))</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">        </span><span class="p">];</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="p">};</span>
</code></pre></div>
<p>这样我们就可以使用如下代码来创建该控件：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">MyWidget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SNew</span><span class="p">(</span><span class="n">SCustomWidget</span><span class="p">);</span>
</code></pre></div>
<p>如果想增加 <strong>参数（Argument）</strong> ，比如说让文本内容可以设置，那么可以把定义改为：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">SCustomWidget</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">SCompoundWidget</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="p">{</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="n">SLATE_BEGIN_ARGS</span><span class="p">(</span><span class="n">SCustomWidget</span><span class="p">)</span><span class="w">                         </span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">_Text</span><span class="p">(</span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;Default&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">     </span><span class="c1">//初始化参数默认值，变量名为参数定义时的变量名前加下划线</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">        </span><span class="p">}</span><span class="w">               </span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">        </span><span class="n">SLATE_ARGUMENT</span><span class="p">(</span><span class="n">FText</span><span class="p">,</span><span class="n">Text</span><span class="p">)</span><span class="w">                  </span><span class="c1">//使用宏SLATE_ARGUMENT定义参数</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="n">SLATE_END_ARGS</span><span class="p">()</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">Construct</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FArguments</span><span class="o">&amp;</span><span class="w"> </span><span class="n">InArgs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">      </span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">        </span><span class="n">Text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InArgs</span><span class="p">.</span><span class="n">_Text</span><span class="p">;</span><span class="w">                        </span><span class="c1">//接收传递进来的参数</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">        </span><span class="n">ChildSlot</span><span class="w">                                   </span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">        </span><span class="p">[</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">            </span><span class="n">SNew</span><span class="p">(</span><span class="n">STextBlock</span><span class="p">)</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">            </span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span><span class="w">                             </span><span class="c1">//传递文本内容</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">        </span><span class="p">];</span>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">    </span><span class="n">FText</span><span class="w"> </span><span class="n">Text</span><span class="p">;</span>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="p">};</span>
</code></pre></div>
<p>这样就可以使用如下代码设置控件内容：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">MyWidget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SNew</span><span class="p">(</span><span class="n">SCustomWidget</span><span class="p">)</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">                    </span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">));</span>
</code></pre></div>
<p>当然，我们也可以不走FArguments的方式，直接这样：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">SCustomWidget</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">SCompoundWidget</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="p">{</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">    </span><span class="n">SLATE_BEGIN_ARGS</span><span class="p">(</span><span class="n">SCustomWidget</span><span class="p">){}</span><span class="w">               </span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="n">SLATE_END_ARGS</span><span class="p">()</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">Construct</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FArguments</span><span class="o">&amp;</span><span class="w"> </span><span class="n">InArgs</span><span class="p">,</span><span class="w"> </span><span class="n">FText</span><span class="w"> </span><span class="n">InText</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">    </span><span class="c1">//直接从Construct的函数参数中传入</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">        </span><span class="n">Text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InText</span><span class="p">;</span><span class="w">                      </span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">        </span><span class="n">ChildSlot</span><span class="w">                                   </span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w">        </span><span class="p">[</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w">            </span><span class="n">SNew</span><span class="p">(</span><span class="n">STextBlock</span><span class="p">)</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w">            </span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="w">        </span><span class="p">];</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="w">    </span><span class="n">FText</span><span class="w"> </span><span class="n">Text</span><span class="p">;</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="p">};</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">MyWidget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SNew</span><span class="p">(</span><span class="n">SCustomWidget</span><span class="p">,</span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">));</span><span class="w">   </span><span class="c1">//从SNew的参数列表中传入Text</span>
</code></pre></div>
<p>如果想让上述参数能够绑定委托，就需要使用Slate的 <strong>属性（Attribute）</strong> 机制：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">SCustomWidget</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">SCompoundWidget</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="p">{</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="n">SLATE_BEGIN_ARGS</span><span class="p">(</span><span class="n">SCustomWidget</span><span class="p">)</span><span class="w">                         </span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">_Text</span><span class="p">(</span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;Default&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">     </span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">        </span><span class="p">}</span><span class="w">               </span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">        </span><span class="n">SLATE_ATTRIBUTE</span><span class="p">(</span><span class="n">FText</span><span class="p">,</span><span class="n">Text</span><span class="p">)</span><span class="w">                         </span><span class="c1">//使用宏SLATE_ATTRIBUTE定义参数</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">    </span><span class="n">SLATE_END_ARGS</span><span class="p">()</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">Construct</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FArguments</span><span class="o">&amp;</span><span class="w"> </span><span class="n">InArgs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">      </span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">        </span><span class="n">Text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InArgs</span><span class="p">.</span><span class="n">_Text</span><span class="p">;</span><span class="w">                                </span><span class="c1">//接收传递进来的参数</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">        </span><span class="n">ChildSlot</span><span class="w">                                   </span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">            </span><span class="p">[</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="w">                </span><span class="n">SNew</span><span class="p">(</span><span class="n">STextBlock</span><span class="p">)</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="w">                </span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span><span class="w">                                 </span><span class="c1">//传递文本属性</span>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="w">            </span><span class="p">];</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="w">    </span><span class="n">TAttribute</span><span class="o">&lt;</span><span class="n">FText</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Text</span><span class="p">;</span><span class="w">                                 </span><span class="c1">//使用TAttribute包裹属性</span>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="p">};</span>
</code></pre></div>
<p>然后就能使用这样的代码：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">MyWidget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SNew</span><span class="p">(</span><span class="n">SCustomWidget</span><span class="p">)</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">        </span><span class="p">.</span><span class="n">Text_Lambda</span><span class="p">([](){</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">);</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">        </span><span class="p">});</span>
</code></pre></div>
<p>如果想增加一些控件的事件处理回调，比如说当上面文本变动时的做一些处理，那么可以用 Slate 的 <strong>事件（Event）</strong> 机制：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">SCustomWidget</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">SCompoundWidget</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="p">{</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">    </span><span class="n">SLATE_BEGIN_ARGS</span><span class="p">(</span><span class="n">SCustomWidget</span><span class="p">)</span><span class="w">                         </span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">_Text</span><span class="p">(</span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;Default&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">     </span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">        </span><span class="p">}</span><span class="w">               </span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">        </span><span class="n">SLATE_ATTRIBUTE</span><span class="p">(</span><span class="n">FText</span><span class="p">,</span><span class="n">Text</span><span class="p">)</span><span class="w">                         </span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">        </span><span class="n">SLATE_EVENT</span><span class="p">(</span><span class="n">FSimpleDelegate</span><span class="p">,</span><span class="w"> </span><span class="n">OnTextChanged</span><span class="p">)</span><span class="w"> </span><span class="c1">//使用宏SLATE_EVENT声明事件</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">    </span><span class="n">SLATE_END_ARGS</span><span class="p">()</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">Construct</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FArguments</span><span class="o">&amp;</span><span class="w"> </span><span class="n">InArgs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">      </span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="w">        </span><span class="n">Text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InArgs</span><span class="p">.</span><span class="n">_Text</span><span class="p">;</span><span class="w">    </span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="w">        </span><span class="n">OnTextChanged</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InArgs</span><span class="p">.</span><span class="n">_OnTextChanged</span><span class="p">;</span><span class="w">      </span><span class="c1">//传递事件委托</span>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="w">        </span><span class="n">ChildSlot</span><span class="w">                                   </span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="w">        </span><span class="p">[</span>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="w">            </span><span class="n">SNew</span><span class="p">(</span><span class="n">STextBlock</span><span class="p">)</span>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="w">            </span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span>
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="w">        </span><span class="p">];</span>
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">SetText</span><span class="p">(</span><span class="n">FText</span><span class="w"> </span><span class="n">InText</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a><span class="w">        </span><span class="n">Text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InText</span><span class="p">;</span>
<a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a><span class="w">        </span><span class="n">OnTextChanged</span><span class="p">.</span><span class="n">ExecuteIfBound</span><span class="p">();</span><span class="w">             </span><span class="c1">//执行委托</span>
<a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a><span class="w">    </span><span class="n">FText</span><span class="w"> </span><span class="n">GetText</span><span class="p">(){</span>
<a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Text</span><span class="p">.</span><span class="n">Get</span><span class="p">();</span>
<a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a><span class="w">    </span><span class="n">FSimpleDelegate</span><span class="w"> </span><span class="n">OnTextChanged</span><span class="p">;</span><span class="w">                  </span><span class="c1">//定义委托</span>
<a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a><span class="w">    </span><span class="n">TAttribute</span><span class="o">&lt;</span><span class="n">FText</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Text</span><span class="p">;</span>
<a id="__codelineno-16-30" name="__codelineno-16-30" href="#__codelineno-16-30"></a><span class="p">};</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">MyWidget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SNew</span><span class="p">(</span><span class="n">SCustomWidget</span><span class="p">)</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">    </span><span class="p">.</span><span class="n">Text_Lambda</span><span class="p">([](){</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">);</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">    </span><span class="p">})</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">    </span><span class="p">.</span><span class="n">OnTextChanged_Lambda</span><span class="p">([](){</span><span class="w">                     </span><span class="c1">//当文字变动时打印日志</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">        </span><span class="n">UE_LOG</span><span class="p">(</span><span class="n">LogTemp</span><span class="p">,</span><span class="n">Warning</span><span class="p">,</span><span class="n">TEXT</span><span class="p">(</span><span class="s">&quot;Oh, Text is changed!&quot;</span><span class="p">));</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">    </span><span class="p">});</span>
</code></pre></div>
<p>此外，<code>SLATE_BEGIN_ARGS(...)</code>和<code>SLATE_END_ARGS()</code>之间还有其他可供使用的宏，使用频率不高，因此这里不展开描述，具体可以查看：</p>
<ul>
<li><code>Engine\Source\Runtime\SlateCore\Public\Widgets\DeclarativeSyntaxSupport.h</code></li>
</ul>
<p>综上，Slate的开发流程基本如此。</p>
<h3 id="_5">控件一览<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>这里主要是为了建立  <strong>控件&lt;---&gt;类型</strong> 的映射，知道有什么控件，当使用这些控件的时候，UE源码中大量的用例可供参考，此外UE还提供相应的调试工具。</p>
<h4 id="_6">基础<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<ul>
<li><code>SButton</code>：按钮</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518154617249.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518154617249" src="../Resources/image-20220518154617249.png" /></a></p>
<ul>
<li><code>SCheckBox</code>：复选框</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518154711351.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518154711351" src="../Resources/image-20220518154711351.png" /></a></p>
<ul>
<li><code>SComboBox&lt;OptionType&gt;</code>：自定义元素的组合框，需要提供菜单项的控件生成器</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518154846902.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518154846902" src="../Resources/image-20220518154846902.png" /></a></p>
<ul>
<li><code>STextComboBox</code> ：文本组合框</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518172336987.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518172336987" src="../Resources/image-20220518172336987.png" /></a></p>
<ul>
<li><code>SComboButton</code>：组合按钮，与ComboBox不同的是，ComboButton需要提供一个完整菜单的生成器，而非菜单项生成器</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518155900834.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518155900834" src="../Resources/image-20220518155900834.png" /></a></p>
<ul>
<li><code>SInputKeySelector</code>：按键输入选择器</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518162532859.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518162532859" src="../Resources/image-20220518162532859.png" /></a></p>
<ul>
<li><code>SNumericDropDown&lt;NumType&gt;</code>：数字下拉控件</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518163912751.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518163912751" src="../Resources/image-20220518163912751.png" /></a></p>
<ul>
<li><code>SNumericEntryBox&lt;NumType&gt;</code>：数字选择框</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518163925567.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518163925567" src="../Resources/image-20220518163925567.png" /></a></p>
<ul>
<li><code>SRotatorInputBox = SNumericRotatorInputBox&lt;float&gt;</code>：旋转输入框</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518164200510.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518164200510" src="../Resources/image-20220518164200510.png" /></a></p>
<ul>
<li><code>SSlider</code>：滑动条</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518171119875.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518171119875" src="../Resources/image-20220518171119875.png" /></a></p>
<ul>
<li><code>SSpinBox&lt;NumericType&gt;</code>：自定义数字类型的微调框</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518171137321.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518171137321" src="../Resources/image-20220518171137321.png" /></a></p>
<ul>
<li><code>SVectorInputBox = SNumericVectorInputBox&lt;float, UE::Math::TVector&lt;float&gt;, 3&gt;</code>：向量输入框</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518171848647.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518171848647" src="../Resources/image-20220518171848647.png" /></a></p>
<ul>
<li><code>SVolumeControl</code>：音量调节控件</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518171209154.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518171209154" src="../Resources/image-20220518171209154.png" /></a></p>
<h5 id="_7">文本<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h5>
<ul>
<li><code>STextBlock</code>：文本显示块</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519151610023.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519151610023" src="../Resources/image-20220519151610023.png" /></a></p>
<ul>
<li>
<p><code>SRichTextBlock</code>：富文本显示块</p>
</li>
<li>
<p><code>SEditableText</code>：可编辑文本</p>
</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518160850714.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518160850714" src="../Resources/image-20220518160850714.png" /></a></p>
<ul>
<li><code>SInlineEditableTextBlock</code>：单行文本编辑块（在编辑时才会显示边框）</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519151600924.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519151600924" src="../Resources/image-20220519151600924.png" /></a></p>
<ul>
<li><code>SEditableTextBox</code>：可编辑器文本框</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518161209322.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518161209322" src="../Resources/image-20220518161209322.png" /></a></p>
<ul>
<li><code>SSuggestionTextBox</code>：带智能提示及输入历史的文本框</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518165125687.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518165125687" src="../Resources/image-20220518165125687.png" /></a></p>
<ul>
<li><code>SSearchBox</code>：搜索框</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518164213105.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518164213105" src="../Resources/image-20220518164213105.png" /></a></p>
<ul>
<li><code>SMultiLineEditableText</code>：多行文本编辑块</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519151549183.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519151549183" src="../Resources/image-20220519151549183.png" /></a></p>
<ul>
<li><code>SMultiLineEditableTextBox</code>：多行可编辑文本框</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518163837277.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518163837277" src="../Resources/image-20220518163837277.png" /></a></p>
<ul>
<li><code>SHyperlink</code>：超链接</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518161727667.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518161727667" src="../Resources/image-20220518161727667.png" /></a></p>
<h5 id="_8">颜色<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h5>
<ul>
<li><code>SColorBlock</code>：单个颜色的显示控件</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518175311526.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518175311526" src="../Resources/image-20220518175311526.png" /></a></p>
<ul>
<li><code>SSimpleGradient</code>：简单渐变色的显示控件，只支持设置起始颜色和结束颜色</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518175922270.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../Resources/image-20220518175922270.png" /></a></p>
<ul>
<li><code>SComplexGradient</code>：复杂渐变色的显示控件，支持任意颜色数量组成的渐变色</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518180009013.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518180009013" src="../Resources/image-20220518180009013.png" /></a></p>
<ul>
<li><code>SColorPicker</code>：单个颜色调节的整合控件（需引入模块 <strong>AppFramework</strong> ）</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220518181105385.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220518181105385" src="../Resources/image-20220518181105385.png" /></a></p>
<h5 id="_9">图像<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h5>
<ul>
<li><code>SImage</code>：用于显示图像</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519100214978.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519100214978" src="../Resources/image-20220519100214978.png" /></a></p>
<h5 id="_10">导航<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h5>
<ul>
<li><code>SBreadcrumbTrail</code></li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519101516637.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519101516637" src="../Resources/image-20220519101516637.png" /></a></p>
<h5 id="_11">通知<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h5>
<ul>
<li><code>SErrorHint</code>：错误图标，可设置ToolTip</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519102729140.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519102729140" src="../Resources/image-20220519102729140.png" /></a></p>
<ul>
<li><code>SErrorText</code>：红色背景的文本块</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519102738687.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519102738687" src="../Resources/image-20220519102738687.png" /></a></p>
<ul>
<li><code>FNotificationInfo</code>：非控件，用于消息通知</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519102706748.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519102706748" src="../Resources/image-20220519102706748.png" /></a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">FNotificationInfo</span><span class="w"> </span><span class="n">NotificationInfo</span><span class="p">(</span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;FNotificationInfo&quot;</span><span class="p">));</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="n">NotificationInfo</span><span class="p">.</span><span class="n">Text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;This Is Notification Info&quot;</span><span class="p">);</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="n">NotificationInfo</span><span class="p">.</span><span class="n">bFireAndForget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="n">NotificationInfo</span><span class="p">.</span><span class="n">ExpireDuration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100.0f</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="n">NotificationInfo</span><span class="p">.</span><span class="n">bUseThrobber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="n">FSlateNotificationManager</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">AddNotification</span><span class="p">(</span><span class="n">NotificationInfo</span><span class="p">);</span>
</code></pre></div>
<ul>
<li><code>SProgressBar</code>：进度条</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519101724243.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519101724243" src="../Resources/image-20220519101724243.png" /></a></p>
<ul>
<li><code>SHeader</code>：标题控件</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519142042405.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519142042405" src="../Resources/image-20220519142042405.png" /></a></p>
<ul>
<li><code>SScrollBar</code>：滚动条</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519143516261.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519143516261" src="../Resources/image-20220519143516261.png" /></a></p>
<ul>
<li><code>SSpacer</code>：空白控件，一般用于在布局中进行填充</li>
</ul>
<h4 id="spanel">控件容器（SPanel）<a class="headerlink" href="#spanel" title="Permanent link">&para;</a></h4>
<h5 id="_12">布局与尺寸<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p><code>SVerticalBox</code>：竖直布局</p>
</li>
<li>
<p><code>SHorizontalBox</code>：水平布局</p>
</li>
<li>
<p><code>SOverlay</code>：重叠布局</p>
</li>
<li>
<p><code>SGridPanel</code>：网格布局</p>
</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519141108149.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519141108149" src="../Resources/image-20220519141108149.png" /></a></p>
<ul>
<li>
<p><code>SUniformGridPanel</code>：使用统一网格大小的网格布局面板。</p>
</li>
<li>
<p><code>SWrapBox</code>：流式布局，可设置排列方向，当控件超出尺寸时，换行。</p>
</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519134544114.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519134544114" src="../Resources/image-20220519134544114.png" /></a></p>
<ul>
<li>
<p><code>SUniformWrapPanel</code>：使用统一大小的流式布局</p>
</li>
<li>
<p><code>SCanvas</code>：可以使用任意坐标和大小来放置Child</p>
</li>
<li>
<p><code>SConstraintCanvas</code> :静态</p>
</li>
<li>
<p><code>SSplitter</code>：可以拖拽分割线来调整Widget间分割的大小</p>
</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519144844487.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519144844487" src="../Resources/image-20220519144844487.png" /></a></p>
<ul>
<li><code>SScrollBox</code>：为Content添加滚动条</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519133723353.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519133723353" src="../Resources/image-20220519133723353.png" /></a></p>
<ul>
<li><code>SWidgetSwitcher</code>：Widget切换控件，将Widget全部添加到Slot中，通过设置Slot Index来切换显示对应的Widget</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519144306639.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519144306639" src="../Resources/image-20220519144306639.png" /></a></p>
<ul>
<li>
<p><code>SDPIScaler</code>：用于调整DPI缩放</p>
</li>
<li>
<p><code>SBox</code>：控制Content的固定尺寸、最小尺寸或者最大尺寸</p>
</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519133531893.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519133531893" src="../Resources/image-20220519133531893.png" /></a></p>
<ul>
<li><code>SScaleBox</code>：统一缩放Content的尺寸</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519133607430.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519133607430" src="../Resources/image-20220519133607430.png" /></a></p>
<h5 id="_13">视图<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h5>
<ul>
<li><code>SListView</code>：列表视图</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519104631179.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519104631179" src="../Resources/image-20220519104631179.png" /></a></p>
<ul>
<li><code>STileView</code>：块视图</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519105945628.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519105945628" src="../Resources/image-20220519105945628.png" /></a></p>
<ul>
<li><code>STreeView</code>：树视图</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519110629347.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519110629347" src="../Resources/image-20220519110629347.png" /></a></p>
<h5 id="_14">停靠窗口<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h5>
<ul>
<li><code>SDockTab</code></li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519113722921.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519113722921" src="../Resources/image-20220519113722921.png" /></a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="k">const</span><span class="w"> </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">SDockTab</span><span class="o">&gt;</span><span class="w"> </span><span class="n">MajorTab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SNew</span><span class="p">(</span><span class="n">SDockTab</span><span class="p">).</span><span class="n">TabRole</span><span class="p">(</span><span class="n">ETabRole</span><span class="o">::</span><span class="n">MajorTab</span><span class="p">);</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="n">TabManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FGlobalTabmanager</span><span class="o">::</span><span class="n">Get</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">NewTabManager</span><span class="p">(</span><span class="n">MajorTab</span><span class="p">);</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="n">TabManager</span><span class="o">-&gt;</span><span class="n">RegisterTabSpawner</span><span class="p">(</span><span class="n">FName</span><span class="p">(</span><span class="s">&quot;MyDockTab&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">FOnSpawnTab</span><span class="o">::</span><span class="n">CreateLambda</span><span class="p">([](</span><span class="k">const</span><span class="w"> </span><span class="n">FSpawnTabArgs</span><span class="o">&amp;</span><span class="w"> </span><span class="n">Args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">    </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">SDockTab</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Tab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SNew</span><span class="p">(</span><span class="n">SDockTab</span><span class="p">).</span><span class="n">Content</span><span class="p">()[</span><span class="n">SNew</span><span class="p">(</span><span class="n">STextBlock</span><span class="p">).</span><span class="n">Text</span><span class="p">(</span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;MyDockContent&quot;</span><span class="p">))];</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Tab</span><span class="p">;</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="p">})).</span><span class="n">SetDisplayName</span><span class="p">(</span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;MyDock&quot;</span><span class="p">))</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">    </span><span class="p">.</span><span class="n">SetMenuType</span><span class="p">(</span><span class="n">ETabSpawnerMenuType</span><span class="o">::</span><span class="n">Hidden</span><span class="p">);</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="n">TabManager</span><span class="o">-&gt;</span><span class="n">TryInvokeTab</span><span class="p">(</span><span class="n">FName</span><span class="p">(</span><span class="s">&quot;MyDockTab&quot;</span><span class="p">));</span>
</code></pre></div>
<h5 id="_15">其他<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h5>
<ul>
<li><code>SBackgroundBlur</code>：模糊Content的背景</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519114840338.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519114840338" src="../Resources/image-20220519114840338.png" /></a></p>
<ul>
<li><code>SBorder</code>：为Content添加边框</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519133519815.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519133519815" src="../Resources/image-20220519133519815.png" /></a></p>
<ul>
<li>
<p><code>STooltipPresenter</code>：为Content添加ToolTip</p>
</li>
<li>
<p><code>SExpandableArea</code>：允许展开或收纳Content</p>
</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20220519142057130.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220519142057130" src="../Resources/image-20220519142057130.png" /></a></p>
<ul>
<li><code>SFxWidget</code></li>
<li><code>SMenuAnchor</code>：为区域增加上下文菜单</li>
</ul>
<h3 id="_16">代码参考<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p>UE提供了 <strong>控件反射器</strong> ，可以快速定位到对应UI的创建代码，它的启动点位于编辑器主面板的<code>顶部菜单栏</code> - <code>工具</code> - <code>调试</code> - <code>控件反射器</code>：</p>
<p><a class="glightbox" href="../Resources/image-20230531094205665.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230531094205665" src="../Resources/image-20230531094205665.png" /></a></p>
<p>另外，官方的引擎源码中也提供了一个 <strong>SlateViewer</strong> 工程展示了大部分Slate控件的基本使用：</p>
<p><a class="glightbox" href="../Resources/image-20230531094416657.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230531094416657" src="../Resources/image-20230531094416657.png" /></a></p>
<p><a class="glightbox" href="../Resources/image-20230531094851667.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230531094851667" src="../Resources/image-20230531094851667.png" /></a></p>
<p>借助IDE的 <strong>代码搜索工具</strong> 可以在引擎中找到对应控件的参数示例，在<code>Visual Studio</code>中也可以在<code>解决方案资源管理器</code>中查看<code>类的派生关系</code>概览所有控件：</p>
<p><a class="glightbox" href="../Resources/image-20230531134824751.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230531134824751" src="../Resources/image-20230531134824751.png" /></a></p>
<h2 id="_17">高级定制<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h2>
<p>上述技能能满足UI开发的绝大部分需求，但需要涉及到一些复杂的交互机制和渲染逻辑时，就需要自定义SLeafWidget</p>
<p>这里有一个很好的示例， 实现了一个可拖拽移动的控件：</p>
<p><a class="glightbox" href="../Resources/13.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="13" src="../Resources/13.gif" /></a></p>
<p>代码如下：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="cp">#pragma once</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Styling/StyleColors.h&quot;</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Brushes/SlateColorBrush.h&quot;</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="k">class</span><span class="w"> </span><span class="nc">SCustomSlateWidget</span><span class="w"> </span><span class="o">:</span><span class="k">public</span><span class="w"> </span><span class="n">SLeafWidget</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="n">SLATE_DECLARE_WIDGET</span><span class="p">(</span><span class="n">SCustomSlateWidget</span><span class="p">,</span><span class="w"> </span><span class="n">SLeafWidget</span><span class="p">)</span><span class="w">   </span><span class="c1">//使用宏SLATE_DECLARE_WIDGET声明Slate控件</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">    </span><span class="n">SLATE_BEGIN_ARGS</span><span class="p">(</span><span class="n">SCustomSlateWidget</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">    </span><span class="n">SLATE_END_ARGS</span><span class="p">()</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">Construct</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">SCustomSlateWidget</span><span class="o">::</span><span class="n">FArguments</span><span class="w"> </span><span class="n">InArgs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w">        </span><span class="n">SetCursor</span><span class="p">(</span><span class="n">EMouseCursor</span><span class="o">::</span><span class="n">GrabHand</span><span class="p">);</span><span class="w">                  </span><span class="c1">//设置鼠标进入控件区域的样式</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="k">protected</span><span class="o">:</span>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="w">    </span><span class="n">FReply</span><span class="w"> </span><span class="n">OnMouseButtonDown</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FGeometry</span><span class="o">&amp;</span><span class="w"> </span><span class="n">MyGeometry</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FPointerEvent</span><span class="o">&amp;</span><span class="w"> </span><span class="n">MouseEvent</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">MouseEvent</span><span class="p">.</span><span class="n">IsMouseButtonDown</span><span class="p">(</span><span class="n">EKeys</span><span class="o">::</span><span class="n">LeftMouseButton</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="w">            </span><span class="n">LastMouseDownPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyGeometry</span><span class="p">.</span><span class="n">AbsoluteToLocal</span><span class="p">(</span><span class="n">MouseEvent</span><span class="p">.</span><span class="n">GetScreenSpacePosition</span><span class="p">());</span><span class="c1">//将鼠标位置从屏幕空间转换到控件的本地空间</span>
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">FReply</span><span class="o">::</span><span class="n">Handled</span><span class="p">().</span><span class="n">CaptureMouse</span><span class="p">(</span><span class="n">SharedThis</span><span class="p">(</span><span class="k">this</span><span class="p">));</span><span class="w">                                </span><span class="c1">//开始高频率捕获全局的鼠标移动</span>
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">FReply</span><span class="o">::</span><span class="n">Handled</span><span class="p">();</span>
<a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a><span class="w">    </span><span class="n">FReply</span><span class="w"> </span><span class="n">OnMouseMove</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FGeometry</span><span class="o">&amp;</span><span class="w"> </span><span class="n">MyGeometry</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FPointerEvent</span><span class="o">&amp;</span><span class="w"> </span><span class="n">MouseEvent</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="p">{</span>
<a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">MouseEvent</span><span class="p">.</span><span class="n">IsMouseButtonDown</span><span class="p">(</span><span class="n">EKeys</span><span class="o">::</span><span class="n">LeftMouseButton</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a><span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">Window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FSlateApplication</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">FindWidgetWindow</span><span class="p">(</span><span class="n">SharedThis</span><span class="p">(</span><span class="k">this</span><span class="p">));</span><span class="w">                  </span><span class="c1">//获取该控件的窗口</span>
<a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a><span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">CurrentMousePosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyGeometry</span><span class="p">.</span><span class="n">AbsoluteToLocal</span><span class="p">(</span><span class="n">MouseEvent</span><span class="p">.</span><span class="n">GetScreenSpacePosition</span><span class="p">());</span>
<a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a><span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">CurrWindowPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Window</span><span class="o">-&gt;</span><span class="n">GetPositionInScreen</span><span class="p">();</span>
<a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a><span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">TargetPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CurrentMousePosition</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">CurrWindowPosition</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">LastMouseDownPosition</span><span class="p">;</span><span class="w">    </span><span class="c1">//计算位置移动</span>
<a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a><span class="w">            </span><span class="n">Window</span><span class="o">-&gt;</span><span class="n">MoveWindowTo</span><span class="p">(</span><span class="n">TargetPosition</span><span class="p">);</span>
<a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">FReply</span><span class="o">::</span><span class="n">Handled</span><span class="p">();</span>
<a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a><span class="w">    </span><span class="n">FReply</span><span class="w"> </span><span class="n">OnMouseButtonUp</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FGeometry</span><span class="o">&amp;</span><span class="w"> </span><span class="n">MyGeometry</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FPointerEvent</span><span class="o">&amp;</span><span class="w"> </span><span class="n">MouseEvent</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a><span class="w">        </span><span class="n">LastMouseDownPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FVector2D</span><span class="o">::</span><span class="n">ZeroVector</span><span class="p">;</span>
<a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">FReply</span><span class="o">::</span><span class="n">Handled</span><span class="p">().</span><span class="n">ReleaseMouseCapture</span><span class="p">();</span><span class="w">                                         </span><span class="c1">//  释放鼠标捕获</span>
<a id="__codelineno-20-34" name="__codelineno-20-34" href="#__codelineno-20-34"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-35" name="__codelineno-20-35" href="#__codelineno-20-35"></a><span class="w">    </span><span class="n">int32</span><span class="w"> </span><span class="n">OnPaint</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FPaintArgs</span><span class="o">&amp;</span><span class="w"> </span><span class="n">Args</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FGeometry</span><span class="o">&amp;</span><span class="w"> </span><span class="n">AllottedGeometry</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FSlateRect</span><span class="o">&amp;</span><span class="w"> </span><span class="n">MyCullingRect</span><span class="p">,</span><span class="w"> </span><span class="n">FSlateWindowElementList</span><span class="o">&amp;</span><span class="w"> </span><span class="n">OutDrawElements</span><span class="p">,</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">LayerId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FWidgetStyle</span><span class="o">&amp;</span><span class="w"> </span><span class="n">InWidgetStyle</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">bParentEnabled</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-36" name="__codelineno-20-36" href="#__codelineno-20-36"></a><span class="w">        </span><span class="k">static</span><span class="w"> </span><span class="n">FSlateFontInfo</span><span class="w"> </span><span class="n">FontInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FCoreStyle</span><span class="o">::</span><span class="n">GetDefaultFontStyle</span><span class="p">(</span><span class="s">&quot;Bold&quot;</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span>
<a id="__codelineno-20-37" name="__codelineno-20-37" href="#__codelineno-20-37"></a><span class="w">        </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FSlateBrush</span><span class="o">*</span><span class="w"> </span><span class="n">Bursh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FAppStyle</span><span class="o">::</span><span class="n">GetBrush</span><span class="p">(</span><span class="s">&quot;WhiteBrush&quot;</span><span class="p">);</span>
<a id="__codelineno-20-38" name="__codelineno-20-38" href="#__codelineno-20-38"></a><span class="w">        </span><span class="n">FLinearColor</span><span class="w"> </span><span class="n">BackgroundColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IsHovered</span><span class="p">()</span><span class="o">?</span><span class="w"> </span><span class="n">FLinearColor</span><span class="p">(</span><span class="mf">0.6f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9f</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">FLinearColor</span><span class="p">(</span><span class="mf">0.1f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9f</span><span class="p">);</span>
<a id="__codelineno-20-39" name="__codelineno-20-39" href="#__codelineno-20-39"></a><span class="w">        </span><span class="n">FSlateDrawElement</span><span class="o">::</span><span class="n">MakeBox</span><span class="p">(</span><span class="n">OutDrawElements</span><span class="p">,</span><span class="w"> </span><span class="n">LayerId</span><span class="p">,</span><span class="w"> </span><span class="n">AllottedGeometry</span><span class="p">.</span><span class="n">ToPaintGeometry</span><span class="p">(),</span><span class="w"> </span><span class="n">Bursh</span><span class="p">,</span><span class="w"> </span><span class="n">ESlateDrawEffect</span><span class="o">::</span><span class="n">None</span><span class="p">,</span><span class="w"> </span><span class="n">BackgroundColor</span><span class="p">);</span><span class="w">       </span><span class="c1">//绘制背景</span>
<a id="__codelineno-20-40" name="__codelineno-20-40" href="#__codelineno-20-40"></a><span class="w">        </span><span class="n">FSlateDrawElement</span><span class="o">::</span><span class="n">MakeText</span><span class="p">(</span><span class="n">OutDrawElements</span><span class="p">,</span><span class="w"> </span><span class="n">LayerId</span><span class="p">,</span><span class="w"> </span><span class="n">AllottedGeometry</span><span class="p">.</span><span class="n">ToPaintGeometry</span><span class="p">(),</span><span class="w"> </span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;Hello Slate&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">FontInfo</span><span class="p">);</span><span class="w">          </span><span class="c1">//绘制文字</span>
<a id="__codelineno-20-41" name="__codelineno-20-41" href="#__codelineno-20-41"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">LayerId</span><span class="p">;</span>
<a id="__codelineno-20-42" name="__codelineno-20-42" href="#__codelineno-20-42"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-43" name="__codelineno-20-43" href="#__codelineno-20-43"></a><span class="w">    </span><span class="n">FVector2D</span><span class="w"> </span><span class="n">ComputeDesiredSize</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">LayoutScaleMultiplier</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-44" name="__codelineno-20-44" href="#__codelineno-20-44"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">FVector2D</span><span class="o">::</span><span class="n">ZeroVector</span><span class="p">;</span><span class="w">                                                           </span><span class="c1">// 使用零向量会填充父控件的内容</span>
<a id="__codelineno-20-45" name="__codelineno-20-45" href="#__codelineno-20-45"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-46" name="__codelineno-20-46" href="#__codelineno-20-46"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-20-47" name="__codelineno-20-47" href="#__codelineno-20-47"></a><span class="w">    </span><span class="n">FVector2D</span><span class="w"> </span><span class="n">LastMouseDownPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FVector2D</span><span class="o">::</span><span class="n">ZeroVector</span><span class="p">;</span>
<a id="__codelineno-20-48" name="__codelineno-20-48" href="#__codelineno-20-48"></a><span class="p">};</span>
<a id="__codelineno-20-49" name="__codelineno-20-49" href="#__codelineno-20-49"></a>
<a id="__codelineno-20-50" name="__codelineno-20-50" href="#__codelineno-20-50"></a><span class="c1">// 下方代码需要放置在cpp中</span>
<a id="__codelineno-20-51" name="__codelineno-20-51" href="#__codelineno-20-51"></a><span class="n">SLATE_IMPLEMENT_WIDGET</span><span class="p">(</span><span class="n">SCustomSlateWidget</span><span class="p">)</span><span class="w">                          </span><span class="c1">// 使用宏SLATE_IMPLEMENT_WIDGET生成代码实现</span>
<a id="__codelineno-20-52" name="__codelineno-20-52" href="#__codelineno-20-52"></a><span class="kt">void</span><span class="w"> </span><span class="n">SCustomSlateWidget</span><span class="o">::</span><span class="n">PrivateRegisterAttributes</span><span class="p">(</span><span class="n">FSlateAttributeInitializer</span><span class="o">&amp;</span><span class="w"> </span><span class="n">AttributeInitializer</span><span class="p">)</span><span class="w">    </span><span class="c1">//必须实现此函数</span>
<a id="__codelineno-20-53" name="__codelineno-20-53" href="#__codelineno-20-53"></a><span class="p">{</span>
<a id="__codelineno-20-54" name="__codelineno-20-54" href="#__codelineno-20-54"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="n">FSlateApplication</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">AddWindow</span><span class="p">(</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">    </span><span class="n">SNew</span><span class="p">(</span><span class="n">SWindow</span><span class="p">)</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">    </span><span class="p">.</span><span class="n">ClientSize</span><span class="p">(</span><span class="n">FVector2D</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">))</span><span class="w">                 </span><span class="c1">//设置窗口尺寸为200*200</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">    </span><span class="p">.</span><span class="n">SizingRule</span><span class="p">(</span><span class="n">ESizingRule</span><span class="o">::</span><span class="n">FixedSize</span><span class="p">)</span><span class="w">             </span><span class="c1">//固定窗口尺寸</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">    </span><span class="p">.</span><span class="n">SupportsMaximize</span><span class="p">(</span><span class="nb">false</span><span class="p">)</span><span class="w">                        </span><span class="c1">//关闭最大化</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">    </span><span class="p">.</span><span class="n">SupportsMinimize</span><span class="p">(</span><span class="nb">false</span><span class="p">)</span><span class="w">                        </span><span class="c1">//关闭最小化</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">    </span><span class="p">.</span><span class="n">CreateTitleBar</span><span class="p">(</span><span class="nb">false</span><span class="p">)</span><span class="w">                          </span><span class="c1">//不创建标题栏</span>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="w">    </span><span class="p">.</span><span class="n">AutoCenter</span><span class="p">(</span><span class="n">EAutoCenter</span><span class="o">::</span><span class="n">PreferredWorkArea</span><span class="p">)</span><span class="w">     </span><span class="c1">//居中显示</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="w">    </span><span class="p">.</span><span class="n">IsTopmostWindow</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w">                          </span><span class="c1">//置顶</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="w">    </span><span class="p">[</span>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="w">        </span><span class="n">SNew</span><span class="p">(</span><span class="n">SCustomSlateWidget</span><span class="p">)</span>
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="w">    </span><span class="p">]</span>
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="p">);</span>
</code></pre></div>
<p>自定义 <strong>SLeafWidget</strong> 的工作流程是：</p>
<ul>
<li>使用宏 <strong>SLATE_DECLARE_WIDGET(WidgetType, ParentType)</strong> 声明控件</li>
<li>使用宏 <strong>SLATE_IMPLEMENT_WIDGET(WidgetType)</strong> 在cpp中定义代码实现，并实现函数：<ul>
<li><code>void WidgetType::PrivateRegisterAttributes(FSlateAttributeInitializer&amp; AttributeInitializer)</code></li>
</ul>
</li>
<li>覆写控件尺寸计算的函数：<ul>
<li><code>virtual FVector2D SWidget::ComputeDesiredSize(float LayoutScaleMultiplier) const = 0</code></li>
</ul>
</li>
<li>覆写各类交互事件。</li>
<li>调整控件的属性状态机</li>
<li>依据属性状态机，在<code>绘制函数（OnPaint）</code>中添加绘制元素</li>
</ul>
<h3 id="_18">交互事件<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<p>SWidget提供了非常多的交互事件（以On开头的虚函数）供开发者覆写：</p>
<ul>
<li><code>OnFocusReceived</code>：获得焦点</li>
<li><code>OnFocusLost</code>：失去焦点</li>
<li><code>OnFocusChanging</code>：焦点发生变化</li>
<li><code>OnKeyChar</code>：当键盘输入时</li>
<li><code>OnKeyDown</code>：键盘按键按下</li>
<li><code>OnKeyUp</code>：键盘按键抬起</li>
<li><code>OnMouseButtonDown</code>：鼠标按键按下</li>
<li><code>OnMouseButtonUp</code>：鼠标按键抬起</li>
<li><code>OnMouseMove</code>：鼠标移动</li>
<li><code>OnMouseEnter</code>：鼠标进入到Widget区域的瞬间</li>
<li><code>OnMouseLeave</code>：鼠标离开到Widget区域的瞬间</li>
<li><code>OnMouseButtonDoubleClick</code>：鼠标双击</li>
<li><code>OnMouseWheel</code>：鼠标滚轮滚动</li>
<li><code>OnDragEnter</code>：拖拽东西进入Widget区域的瞬间</li>
<li><code>OnDragLeave</code>：拖拽东西离开Widget区域的瞬间</li>
<li><code>OnDragOver</code>：拖拽东西覆盖Widget区域的时候</li>
<li><code>OnDrop</code>：在Widget上释放拖拽的东西</li>
<li>...</li>
</ul>
<blockquote>
<p>详细说明，请看SWidget的定义，上面有各个事件的说明及触发时机，关于用法可在UE源码中搜索相应的用例。</p>
</blockquote>
<p>使用说明：</p>
<ul>
<li>
<p>这些事件由 <strong>FSlateApplication</strong> 负责调用，其函数参数一般包含了该事件携带的所有信息，我们只需对其进行覆盖（override），根据事件数据，做自己的逻辑即可。</p>
</li>
<li>
<p>事件的返回类型为 <strong>FReply</strong> ，用于定义事件的后续处理，它的构造函数是私有的，必须使用如下静态函数去创建实例：</p>
<ul>
<li><code>FReplay::Handled()</code>：说明该事件已被处理，事件将不会继续往下一级传递。</li>
<li><code>FReplay::Unhandled()</code>：说明该控件并不处理该事件，事件会继续往下一级传递。</li>
</ul>
<p><strong>FReply</strong> 提供了一系列操作用于在事件结束时做一些处理：</p>
</li>
</ul>
<p><a class="glightbox" href="../Resources/image-20230531164053994.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230531164053994" src="../Resources/image-20230531164053994.png" /></a></p>
<h3 id="_19">绘制事件<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<p>SWidget的实际绘制函数为<code>Paint</code>，但由于绘制过程中存在一些固定步骤，因此Slate公开了绘制事件<code>OnPaint</code>供我们自定义绘制逻辑，它的定义如下：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="k">virtual</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="nf">OnPaint</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FPaintArgs</span><span class="o">&amp;</span><span class="w"> </span><span class="n">Args</span><span class="p">,</span><span class="w"> </span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">                      </span><span class="k">const</span><span class="w"> </span><span class="n">FGeometry</span><span class="o">&amp;</span><span class="w"> </span><span class="n">AllottedGeometry</span><span class="p">,</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">                      </span><span class="k">const</span><span class="w"> </span><span class="n">FSlateRect</span><span class="o">&amp;</span><span class="w"> </span><span class="n">MyCullingRect</span><span class="p">,</span><span class="w"> </span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">                      </span><span class="n">FSlateWindowElementList</span><span class="o">&amp;</span><span class="w"> </span><span class="n">OutDrawElements</span><span class="p">,</span><span class="w"> </span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">                      </span><span class="n">int32</span><span class="w"> </span><span class="n">LayerId</span><span class="p">,</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">                      </span><span class="k">const</span><span class="w"> </span><span class="n">FWidgetStyle</span><span class="o">&amp;</span><span class="w"> </span><span class="n">InWidgetStyle</span><span class="p">,</span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">                      </span><span class="kt">bool</span><span class="w"> </span><span class="n">bParentEnabled</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></pre></div>
<p>参数说明：</p>
<ul>
<li><code>const FPaintArgs&amp;</code> Args：绘制事件的参数，可以得到绘制的当前时间、间隔、父窗口...</li>
<li><code>const FGeometry&amp;</code> AllottedGeometry：分配给该SWidget的几何大小（相对于父窗口）</li>
<li><code>const FSlateRect&amp;</code> MyCullingRect：该SWidget的裁剪举行，可以在绘制中根据该矩形丢弃绘制元素</li>
<li><code>FSlateWindowElementList&amp;</code> OutDrawElements：这是整个SWindow的绘制元素列表，我们绘制则是对该对象进行修改。</li>
<li><code>int32</code> LayerId：绘制的LayerID，一般用于给UI分层，方便对同层级的绘制元素做统一处理。</li>
<li><code>const FWidgetStyle&amp;</code> InWidgetStyle：父窗口传递过来的Style</li>
<li><code>bool</code> bParentEnabled：父窗口是否处于开启状态。</li>
</ul>
<p>在<code>OnPaint</code>函数中，我们主要通过 <strong>FSlateDrawElement</strong> 中很多命名以<code>Make</code>开头的静态函数来创建绘制元素，其中有：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">MakeBox</span><span class="p">(</span><span class="w"> </span><span class="c1">//绘制盒子，通过设置Brush，可以是颜色块，也可以是图片</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">    </span><span class="n">FSlateWindowElementList</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ElementList</span><span class="p">,</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="w">    </span><span class="n">uint32</span><span class="w"> </span><span class="n">InLayer</span><span class="p">,</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">FPaintGeometry</span><span class="o">&amp;</span><span class="w"> </span><span class="n">PaintGeometry</span><span class="p">,</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">FSlateBrush</span><span class="o">*</span><span class="w"> </span><span class="n">InBrush</span><span class="p">,</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">    </span><span class="n">ESlateDrawEffect</span><span class="w"> </span><span class="n">InDrawEffects</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ESlateDrawEffect</span><span class="o">::</span><span class="n">None</span><span class="p">,</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">FLinearColor</span><span class="o">&amp;</span><span class="w"> </span><span class="n">InTint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLinearColor</span><span class="o">::</span><span class="n">White</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">MakeRotatedBox</span><span class="p">(...);</span><span class="w">        </span><span class="c1">//绘制一个具有旋转的盒子</span>
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">MakeGradient</span><span class="p">(...);</span><span class="w">          </span><span class="c1">//绘制渐变的盒子</span>
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">MakeText</span><span class="p">(...);</span><span class="w">              </span><span class="c1">//绘制文本</span>
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">MakeShapedText</span><span class="p">(...);</span><span class="w">        </span><span class="c1">//绘制形状文本</span>
<a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">MakeLines</span><span class="p">(...);</span><span class="w">             </span><span class="c1">//绘制线条</span>
<a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">MakeSpline</span><span class="p">(...)</span><span class="w">             </span><span class="c1">//绘制曲线</span>
<a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">MakeDrawSpaceSpline</span><span class="p">(...);</span><span class="w">    </span><span class="c1">//在绘制空间绘制曲线</span>
<a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">MakeCubicBezierSpline</span><span class="p">(...);</span><span class="w">  </span><span class="c1">//绘制三阶贝塞尔曲线</span>
<a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">MakeViewport</span><span class="p">(...)</span><span class="w">           </span><span class="c1">//绘制FSlateViewport</span>
<a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">MakeCustom</span><span class="p">(...);</span><span class="w">            </span><span class="c1">//绘制自定义元素，可自行实现元素的Render函数</span>
<a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">MakeCustomVerts</span><span class="p">(...);</span><span class="w">       </span><span class="c1">//根据顶点进行绘制</span>
<a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">MakePostProcessPass</span><span class="p">(...);</span><span class="w">   </span><span class="c1">//绘制后期滤镜（模糊）</span>
</code></pre></div>
<p>这些函数在UE中有非常多的使用，可以搜索相关代码来参考。</p>
<blockquote>
<p>详见：<code>Runtime\SlateCore\Public\Rendering\DrawElements.h</code></p>
</blockquote>
<h4 id="fslatebrush">FSlateBrush<a class="headerlink" href="#fslatebrush" title="Permanent link">&para;</a></h4>
<p><strong>FSlateBrush</strong> 用于控制填充区域，在界面中有较高的使用频率，因此Slate也提供了一些它的便捷扩展：</p>
<p><a class="glightbox" href="../Resources/image-20230531165625590.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230531165625590" src="../Resources/image-20230531165625590.png" /></a></p>
<ul>
<li><strong>FSlateBorderBrush</strong> ：填充边框</li>
<li><strong>FSlateBoxBrush</strong> ：盒子画刷</li>
<li><strong>FSlateRoundedBoxBrush</strong> ：圆角矩形画刷</li>
<li><strong>FSlateColorBrush</strong> ：颜色画刷</li>
<li><strong>FSlateImageBrush</strong> ：图片<ul>
<li><strong>FSlateVectorImageBrush</strong> ：矢量图</li>
</ul>
</li>
<li><strong>FSlateDynamicImageBrush</strong> ：可动态切换图片的画刷</li>
<li><strong>FSlateNoResource</strong> ：不带任何资源的画刷</li>
</ul>
<blockquote>
<p>上面的一些画刷本质上都是通过一些特定的参数去构造 <strong>FSlateBrush</strong> ，如果出现上述画刷需要组合的情况，可根据它们的构造参数自行组合。</p>
</blockquote>
<p>UE中提供了一些内置的 <strong>FSlateBrush</strong> ，可以在源码中搜索<code>::Get().GetBrush</code>来查找相关使用：</p>
<p><a class="glightbox" href="../Resources/image-20230531180012391.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230531180012391" src="../Resources/image-20230531180012391.png" /></a></p>
<h5 id="_20">示例<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h5>
<p>假如想让整个SWidget填充红色，可以使用这样的代码：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">int32</span><span class="w"> </span><span class="nf">SCustomSlateWidget::OnPaint</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FPaintArgs</span><span class="o">&amp;</span><span class="w"> </span><span class="n">Args</span><span class="p">,</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">                                  </span><span class="k">const</span><span class="w"> </span><span class="n">FGeometry</span><span class="o">&amp;</span><span class="w"> </span><span class="n">AllottedGeometry</span><span class="p">,</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">                                  </span><span class="k">const</span><span class="w"> </span><span class="n">FSlateRect</span><span class="o">&amp;</span><span class="w"> </span><span class="n">MyCullingRect</span><span class="p">,</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">                                  </span><span class="n">FSlateWindowElementList</span><span class="o">&amp;</span><span class="w"> </span><span class="n">OutDrawElements</span><span class="p">,</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">                                  </span><span class="n">int32</span><span class="w"> </span><span class="n">LayerId</span><span class="p">,</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">                                  </span><span class="k">const</span><span class="w"> </span><span class="n">FWidgetStyle</span><span class="o">&amp;</span><span class="w"> </span><span class="n">InWidgetStyle</span><span class="p">,</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">                                  </span><span class="kt">bool</span><span class="w"> </span><span class="n">bParentEnabled</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">FSlateColorBrush</span><span class="w"> </span><span class="n">ColorBrush</span><span class="p">(</span><span class="n">FColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">    </span><span class="n">FSlateDrawElement</span><span class="o">::</span><span class="n">MakeBox</span><span class="p">(</span><span class="n">OutDrawElements</span><span class="p">,</span>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">                               </span><span class="n">LayerId</span><span class="p">,</span><span class="w"> </span>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="w">                               </span><span class="n">AllottedGeometry</span><span class="p">.</span><span class="n">ToPaintGeometry</span><span class="p">(),</span>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="w">                               </span><span class="o">&amp;</span><span class="n">ColorBrush</span><span class="p">,</span>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w">                               </span><span class="n">ESlateDrawEffect</span><span class="o">::</span><span class="n">None</span><span class="p">,</span><span class="w"> </span>
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="w">                               </span><span class="n">ColorBrush</span><span class="p">.</span><span class="n">TintColor</span><span class="p">.</span><span class="n">GetColor</span><span class="p">(</span><span class="n">InWidgetStyle</span><span class="p">));</span>
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">LayerId</span><span class="p">;</span>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="p">}</span>
</code></pre></div>
<h4 id="eslatedraweffect">ESlateDrawEffect<a class="headerlink" href="#eslatedraweffect" title="Permanent link">&para;</a></h4>
<p><strong>ESlateDrawEffect</strong> 为Slate提供了一些效果，它可以是以下值：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">ESlateDrawEffect</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">uint8</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="p">{</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">    </span><span class="n">None</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">            </span><span class="c1">//无效果</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">    </span><span class="n">NoBlending</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">           </span><span class="c1">//无混合</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">    </span><span class="n">PreMultipliedAlpha</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">           </span><span class="c1">//预乘Alpha</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">    </span><span class="n">NoGamma</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">           </span><span class="c1">//不进行Gamma矫正</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="w">    </span><span class="n">InvertAlpha</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">           </span><span class="c1">//反转透明度</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="w">    </span><span class="c1">// ^^ These Match ESlateBatchDrawFlag ^^</span>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="w">    </span><span class="n">NoPixelSnapping</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">           </span><span class="c1">//关闭像素对齐</span>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="w">    </span><span class="n">DisabledEffect</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">           </span><span class="c1">//禁用状态的效果</span>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a><span class="w">    </span><span class="n">IgnoreTextureAlpha</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">           </span><span class="c1">//忽略纹理中的透明度</span>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="w">    </span><span class="n">ReverseGamma</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">7</span><span class="w">        </span><span class="c1">//逆转Gamma</span>
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a><span class="p">};</span>
</code></pre></div>
<h4 id="fslatefontinfo">FSlateFontInfo<a class="headerlink" href="#fslatefontinfo" title="Permanent link">&para;</a></h4>
<p><strong>FSlateFontInfo</strong> 用于指定字体信息，对应UE里的字体资产， 它的部分定义如下：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">SLATECORE_API</span><span class="w"> </span><span class="n">FSlateFontInfo</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="p">{</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">    </span><span class="cm">/**The font object (valid when used from UMG or a Slate widget style asset) */</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">    </span><span class="n">TObjectPtr</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">UObject</span><span class="o">&gt;</span><span class="w"> </span><span class="n">FontObject</span><span class="p">;</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">    </span><span class="cm">/**The material to use when rendering this font */</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">    </span><span class="n">TObjectPtr</span><span class="o">&lt;</span><span class="n">UObject</span><span class="o">&gt;</span><span class="w"> </span><span class="n">FontMaterial</span><span class="p">;</span>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">    </span><span class="cm">/**Settings for applying an outline to a font */</span>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">    </span><span class="n">FFontOutlineSettings</span><span class="w"> </span><span class="n">OutlineSettings</span><span class="p">;</span>
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="w">    </span><span class="cm">/**The composite font data to use (valid when used with a Slate style set in C++) */</span>
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="w">    </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">FCompositeFont</span><span class="o">&gt;</span><span class="w"> </span><span class="n">CompositeFont</span><span class="p">;</span>
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="w">    </span><span class="cm">/**The name of the font to use from the default typeface (None will use the first entry) */</span>
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="w">    </span><span class="n">FName</span><span class="w"> </span><span class="n">TypefaceFontName</span><span class="p">;</span>
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a>
<a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="w">    </span><span class="cm">/**</span>
<a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="cm">     * The font size is a measure in point values. The conversion of points to Slate Units is done at 96 dpi.  So if </span>
<a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a><span class="cm">     * you&#39;re using a tool like Photoshop to prototype layouts and UI mock ups, be sure to change the default dpi </span>
<a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a><span class="cm">     * measurements from 72 dpi to 96 dpi.</span>
<a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="cm">     */</span>
<a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a><span class="w">    </span><span class="n">int32</span><span class="w"> </span><span class="n">Size</span><span class="p">;</span>
<a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a>
<a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a><span class="w">    </span><span class="cm">/**The uniform spacing (or tracking) between all characters in the text. */</span>
<a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a><span class="w">    </span><span class="n">int32</span><span class="w"> </span><span class="n">LetterSpacing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a>
<a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a><span class="w">    </span><span class="cm">/**The font fallback level. Runtime only, don&#39;t set on shared FSlateFontInfo, as it may change the font elsewhere (make a copy). */</span>
<a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a><span class="w">    </span><span class="n">EFontFallback</span><span class="w"> </span><span class="n">FontFallback</span><span class="p">;</span>
<a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a><span class="p">};</span>
</code></pre></div>
<p>UE中有专门的字体编辑器，在C++中直接构造它比较麻烦，不过UE也提供了一些内置的 <strong>FSlateFontInfo</strong> ，比如：</p>
<ul>
<li><code>FCoreStyle::Get().GetFontStyle("NormalFont")</code></li>
<li><code>FCoreStyle::Get().GetFontStyle("SmallFont")</code></li>
<li><code>FCoreStyle::GetDefaultFontStyle("Regular",FontSize);</code></li>
<li><code>FCoreStyle::GetDefaultFontStyle("Bold",FontSize)</code></li>
<li><code>FCoreStyle::GetDefaultFontStyle("Italic",FontSize);</code></li>
<li><code>FCoreStyle::GetDefaultFontStyle("Mono",FontSize);</code></li>
</ul>
<h5 id="fontmeasure">FontMeasure<a class="headerlink" href="#fontmeasure" title="Permanent link">&para;</a></h5>
<p>大多数GUI框架都有 <strong>字体测量（FontMeasure）</strong> 的概念：测量特定字体格式的某个文本的绘制宽度和高度。</p>
<p>在UE中，可以通过如下方式来测量（伪代码）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="n">FSlateApplication</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">GetRenderer</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetFontMeasureService</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Measure</span><span class="p">(</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">FText</span><span class="o">&amp;</span><span class="w"> </span><span class="n">Text</span><span class="p">,</span><span class="w">                      </span><span class="c1">//文本</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">FSlateFontInfo</span><span class="o">&amp;</span><span class="w"> </span><span class="n">InFontInfo</span><span class="p">,</span><span class="w">       </span><span class="c1">//字体</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">FontScale</span><span class="w">                         </span><span class="c1">//字体缩放</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">FVector2D</span><span class="w">                              </span><span class="c1">//返回宽度（X）和高度（Y）</span>
</code></pre></div>
<h3 id="_21">性能优化<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<p>Slate为了优化UI的<code>Paint</code>和<code>Tick</code>性能，提供了一个 <strong>SInvalidationPanel</strong> 控件，该控件可以让子控件中消耗较高的操作进行缓存，只有当一些特定操作导致 <strong>缓存失效（Invalidate）</strong> ，才会重新执行。</p>
<p>详见：<a href="https://docs.unrealengine.com/5.2/zh-CN/understanding-the-slate-ui-architecture-in-unreal-engine/#轮询数据流和委托">理解虚幻引擎Slate 架构 - 轮询数据流和委托 | 虚幻引擎5.2文档 </a></p>
<p>我们可以手动调用子控件的<code>Invalidate()</code>函数来让缓存失效：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">SWidget::Invalidate</span><span class="p">(</span><span class="n">EInvalidateWidgetReason</span><span class="w"> </span><span class="n">InvalidateReason</span><span class="p">);</span>
</code></pre></div>
<p><strong>EInvalidateWidgetReason</strong> 的值可以是：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">EInvalidateWidgetReason</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">uint8</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="p">{</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">    </span><span class="n">None</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">    </span><span class="n">Layout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">        </span><span class="c1">//如果需要更改Widget所需的大小，请使布局无效。这是一个昂贵的无效操作，所以如果你只需要重新绘制一个小部件，就不要使用它</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">    </span><span class="n">Paint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">             </span><span class="c1">//使绘制无效</span>
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">    </span><span class="n">Volatility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">        </span><span class="c1">//当Volatility变动时触发</span>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">    </span><span class="n">ChildOrder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">        </span><span class="c1">//当添加或移除自控件时触发，使之无效会重建Child的顺序</span>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w">    </span><span class="n">RenderTransform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">   </span><span class="c1">//当RenderTransform变动时触发</span>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="w">    </span><span class="n">Visibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">        </span><span class="c1">//当可见性变动时触发</span>
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="w">    </span><span class="n">AttributeRegistration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">     </span><span class="c1">//绑定属性时触发</span>
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="w">    </span><span class="n">Prepass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">                   </span><span class="c1">//使Prepass无效</span>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a>
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="w">    </span><span class="cm">/**</span>
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="cm">     * Use Paint invalidation if you&#39;re changing a normal property involving painting or sizing.</span>
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a><span class="cm">     * Additionally if the property that was changed affects Volatility in anyway, it&#39;s important</span>
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a><span class="cm">     * that you invalidate volatility so that it can be recalculated and cached.</span>
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="cm">     */</span>
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="w">    </span><span class="n">PaintAndVolatility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Paint</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Volatility</span><span class="p">,</span>
<a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a><span class="w">    </span><span class="cm">/**</span>
<a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a><span class="cm">     * Use Layout invalidation if you&#39;re changing a normal property involving painting or sizing.</span>
<a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a><span class="cm">     * Additionally if the property that was changed affects Volatility in anyway, it&#39;s important</span>
<a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a><span class="cm">     * that you invalidate volatility so that it can be recalculated and cached.</span>
<a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a><span class="cm">     */</span>
<a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a><span class="w">    </span><span class="n">LayoutAndVolatility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Layout</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Volatility</span><span class="p">,</span>
<a id="__codelineno-29-25" name="__codelineno-29-25" href="#__codelineno-29-25"></a><span class="p">};</span>
</code></pre></div>
<p>Slate提供了一种基于 <strong>属性（SlateAttribue）</strong> 的方式：让属性的变动跟缓存的重建挂钩</p>
<p>具体的做法是：</p>
<ul>
<li>
<p>使用 <strong>TSlateAttribute</strong> 包裹属性（跟 <strong>TAttribute</strong> 的用途不同）， <strong>TSlateAttribute</strong> 包裹的属性在构造初始化时需要传递参数<code>(*this)</code></p>
</li>
<li>
<p>在<code>void WidgetType::PrivateRegisterAttributes(...)</code>函数中，使用宏 <strong>SLATE_ADD_MEMBER_ATTRIBUTE_DEFINITION(_Initializer, _Property, _Reason)</strong> 来注册属性</p>
</li>
</ul>
<p>这里有一个简短的示例：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">SCustomSlateWidget</span><span class="w"> </span><span class="o">:</span><span class="k">public</span><span class="w"> </span><span class="n">SLeafWidget</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">    </span><span class="n">SLATE_DECLARE_WIDGET</span><span class="p">(</span><span class="n">SCustomSlateWidget</span><span class="p">,</span><span class="w"> </span><span class="n">SLeafWidget</span><span class="p">)</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">    </span><span class="n">SLATE_BEGIN_ARGS</span><span class="p">(</span><span class="n">SCustomSlateWidget</span><span class="p">){}</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">    </span><span class="n">SLATE_END_ARGS</span><span class="p">()</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">Construct</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">SCustomSlateWidget</span><span class="o">::</span><span class="n">FArguments</span><span class="w"> </span><span class="n">InArgs</span><span class="p">){</span><span class="w">            </span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="k">protected</span><span class="o">:</span>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="w">    </span><span class="n">SCustomSlateWidget</span><span class="p">()</span>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">ClickedCounter</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">//初始化SlateAttribute</span>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a><span class="w">    </span><span class="n">FReply</span><span class="w"> </span><span class="n">OnMouseButtonDown</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FGeometry</span><span class="o">&amp;</span><span class="w"> </span><span class="n">MyGeometry</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FPointerEvent</span><span class="o">&amp;</span><span class="w"> </span><span class="n">MouseEvent</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="w">        </span><span class="n">ClickedCounter</span><span class="p">.</span><span class="n">Set</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="n">ClickedCounter</span><span class="p">.</span><span class="n">Get</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">        </span><span class="c1">//计数器+1，这里把鼠标按下当做是点击</span>
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">FReply</span><span class="o">::</span><span class="n">Handled</span><span class="p">();</span>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a><span class="w">    </span><span class="n">int32</span><span class="w"> </span><span class="n">OnPaint</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FPaintArgs</span><span class="o">&amp;</span><span class="w"> </span><span class="n">Args</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FGeometry</span><span class="o">&amp;</span><span class="w"> </span><span class="n">AllottedGeometry</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FSlateRect</span><span class="o">&amp;</span><span class="w"> </span><span class="n">MyCullingRect</span><span class="p">,</span><span class="w"> </span><span class="n">FSlateWindowElementList</span><span class="o">&amp;</span><span class="w"> </span><span class="n">OutDrawElements</span><span class="p">,</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">LayerId</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FWidgetStyle</span><span class="o">&amp;</span><span class="w"> </span><span class="n">InWidgetStyle</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">bParentEnabled</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a><span class="w">        </span><span class="k">static</span><span class="w"> </span><span class="n">FSlateFontInfo</span><span class="w"> </span><span class="n">FontInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FCoreStyle</span><span class="o">::</span><span class="n">GetDefaultFontStyle</span><span class="p">(</span><span class="s">&quot;Bold&quot;</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span>
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a><span class="w">        </span><span class="n">FSlateDrawElement</span><span class="o">::</span><span class="n">MakeText</span><span class="p">(</span><span class="n">OutDrawElements</span><span class="p">,</span><span class="w"> </span><span class="n">LayerId</span><span class="p">,</span><span class="w"> </span><span class="n">AllottedGeometry</span><span class="p">.</span><span class="n">ToPaintGeometry</span><span class="p">(),</span><span class="w"> </span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="n">FString</span><span class="o">::</span><span class="n">FromInt</span><span class="p">(</span><span class="n">ClickedCounter</span><span class="p">.</span><span class="n">Get</span><span class="p">())),</span><span class="w"> </span><span class="n">FontInfo</span><span class="p">);</span><span class="w">                 </span><span class="c1">//绘制当前鼠标点击的次数</span>
<a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">LayerId</span><span class="p">;</span>
<a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a><span class="w">    </span><span class="n">FVector2D</span><span class="w"> </span><span class="n">ComputeDesiredSize</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">LayoutScaleMultiplier</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-22" name="__codelineno-30-22" href="#__codelineno-30-22"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">FVector2D</span><span class="o">::</span><span class="n">ZeroVector</span><span class="p">;</span><span class="w">                                                           </span>
<a id="__codelineno-30-23" name="__codelineno-30-23" href="#__codelineno-30-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-24" name="__codelineno-30-24" href="#__codelineno-30-24"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-30-25" name="__codelineno-30-25" href="#__codelineno-30-25"></a><span class="w">    </span><span class="n">TSlateAttribute</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ClickedCounter</span><span class="p">;</span><span class="w">        </span><span class="c1">//记录鼠标点击次数的计数器</span>
<a id="__codelineno-30-26" name="__codelineno-30-26" href="#__codelineno-30-26"></a><span class="p">};</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="n">SLATE_IMPLEMENT_WIDGET</span><span class="p">(</span><span class="n">SCustomSlateWidget</span><span class="p">)</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="kt">void</span><span class="w"> </span><span class="n">SCustomSlateWidget</span><span class="o">::</span><span class="n">PrivateRegisterAttributes</span><span class="p">(</span><span class="n">FSlateAttributeInitializer</span><span class="o">&amp;</span><span class="w"> </span><span class="n">AttributeInitializer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">    </span><span class="c1">//将ClickedCounter的值变动跟重绘事件挂钩</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">    </span><span class="c1">//SLATE_ADD_MEMBER_ATTRIBUTE_DEFINITION(AttributeInitializer, ClickedCounter, EInvalidateWidgetReason::Paint);</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="n">FSlateApplication</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">AddWindow</span><span class="p">(</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="w">    </span><span class="n">SNew</span><span class="p">(</span><span class="n">SWindow</span><span class="p">)</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="w">    </span><span class="p">.</span><span class="n">SupportsMaximize</span><span class="p">(</span><span class="nb">false</span><span class="p">)</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">    </span><span class="p">.</span><span class="n">SupportsMinimize</span><span class="p">(</span><span class="nb">false</span><span class="p">)</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="w">    </span><span class="p">.</span><span class="n">IsTopmostWindow</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">    </span><span class="p">.</span><span class="n">ClientSize</span><span class="p">(</span><span class="n">FVector2D</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">))</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="w">    </span><span class="p">.</span><span class="n">SizingRule</span><span class="p">(</span><span class="n">ESizingRule</span><span class="o">::</span><span class="n">FixedSize</span><span class="p">)</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="w">    </span><span class="p">.</span><span class="n">CreateTitleBar</span><span class="p">(</span><span class="nb">false</span><span class="p">)</span>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="w">    </span><span class="p">.</span><span class="n">AutoCenter</span><span class="p">(</span><span class="n">EAutoCenter</span><span class="o">::</span><span class="n">PreferredWorkArea</span><span class="p">)</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="w">    </span><span class="p">[</span>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="w">        </span><span class="n">SNew</span><span class="p">(</span><span class="n">SInvalidationPanel</span><span class="p">)</span><span class="w">            </span><span class="c1">// 使用SInvalidationPanel包括</span>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a><span class="w">        </span><span class="p">[</span>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="w">            </span><span class="n">SNew</span><span class="p">(</span><span class="n">SCustomSlateWidget</span><span class="p">)</span>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a><span class="w">        </span><span class="p">]</span>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a><span class="w">    </span><span class="p">]</span>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a><span class="p">);</span>
</code></pre></div>
<p>该代码创建了一个可点击的方块：</p>
<p><a class="glightbox" href="../Resources/image-20230531182616000.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230531182616000" src="../Resources/image-20230531182616000.png" /></a></p>
<p>点击方块会让<code>ClickedCounter+1</code>，但画面不会发生任何变化，当取消<code>PrivateRegisterAttributes</code>中注释的代码：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">SCustomSlateWidget::PrivateRegisterAttributes</span><span class="p">(</span><span class="n">FSlateAttributeInitializer</span><span class="o">&amp;</span><span class="w"> </span><span class="n">AttributeInitializer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">    </span><span class="c1">//将ClickedCounter的值变动跟重绘事件挂钩</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="w">    </span><span class="n">SLATE_ADD_MEMBER_ATTRIBUTE_DEFINITION</span><span class="p">(</span><span class="n">AttributeInitializer</span><span class="p">,</span><span class="w"> </span><span class="n">ClickedCounter</span><span class="p">,</span><span class="w"> </span><span class="n">EInvalidateWidgetReason</span><span class="o">::</span><span class="n">Paint</span><span class="p">);</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="p">}</span>
</code></pre></div>
<p>重新启动程序，可以发现，当<code>ClickedCounter</code>变更时，UI会重新绘制：</p>
<p><a class="glightbox" href="../Resources/53.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="53" src="../Resources/53.gif" /></a></p>
<h2 id="slateumg">从Slate到UMG<a class="headerlink" href="#slateumg" title="Permanent link">&para;</a></h2>
<p>UE的逻辑编程建立在UObject之上，而Slate为了追求极致的性能，并没有使用UObject这种沉重的机制去管理UI对象</p>
<p>在Slate中，使用的是 <strong>共享指针（Shared Pointer）</strong> 的方式来管理UI对象的生命周期</p>
<p>为了提升游戏开发者的UI开发效率，UE使用UObject对Slate控件包裹了一层，通过反射暴露了Slate控件的一些属性和函数，同时支持了可视化的UI设计，这一层接口也就是我们熟知的 <strong>UMG</strong></p>
<p>关于 <strong>UMG</strong> ，官方文档中有详细的介绍：</p>
<ul>
<li><a href="https://docs.unrealengine.com/5.2/zh-CN/umg-ui-designer-for-unreal-engine/">https://docs.unrealengine.com/5.2/zh-CN/umg-ui-designer-for-unreal-engine/</a></li>
</ul>
<p>这里有一个简短的代码很好地体现了Slate和UMG的关系：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="cp">#pragma once</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;UObject/ObjectMacros.h&quot;</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Widgets/Text/STextBlock.h&quot;</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Components/Widget.h&quot;</span>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;CustomUWidget.generated.h&quot;</span>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="n">UCLASS</span><span class="p">(</span><span class="n">meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">DisplayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;CustomWidget&quot;</span><span class="p">))</span><span class="w">                   </span><span class="c1">//DisplayName是控件名称</span>
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="k">class</span><span class="w"> </span><span class="nc">UMGEXTENDUTILITIES_API</span><span class="w"> </span><span class="n">UCustomWidget</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">UWidget</span>
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="p">{</span>
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="w">    </span><span class="n">GENERATED_BODY</span><span class="p">()</span>
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="k">protected</span><span class="o">:</span>
<a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">SWidget</span><span class="o">&gt;</span><span class="w"> </span><span class="n">RebuildWidget</span><span class="p">()</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w">                      </span><span class="c1">//重建控件，并赋值给成员变量</span>
<a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">SAssignNew</span><span class="p">(</span><span class="n">MyTextBlock</span><span class="p">,</span><span class="n">STextBlock</span><span class="p">);</span>
<a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">SynchronizeProperties</span><span class="p">()</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w">                             </span><span class="c1">//将UObejct的属性同步到Slate控件中</span>
<a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a><span class="w">        </span><span class="n">MyTextBlock</span><span class="o">-&gt;</span><span class="n">SetText</span><span class="p">(</span><span class="n">Text</span><span class="p">);</span>
<a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a><span class="w">        </span><span class="n">Super</span><span class="o">::</span><span class="n">SynchronizeProperties</span><span class="p">();</span>
<a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">ReleaseSlateResources</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">bReleaseChildren</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w">        </span><span class="c1">//释放Slate资源</span>
<a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a><span class="w">        </span><span class="n">MyTextBlock</span><span class="p">.</span><span class="n">Reset</span><span class="p">();</span>
<a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a>
<a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a><span class="cp">#if WITH_EDITOR</span>
<a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FText</span><span class="w"> </span><span class="n">GetPaletteCategory</span><span class="p">()</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w">                         </span><span class="c1">//在编辑器上的控件分类</span>
<a id="__codelineno-34-26" name="__codelineno-34-26" href="#__codelineno-34-26"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="s">&quot;CustomCategory&quot;</span><span class="p">);</span>
<a id="__codelineno-34-27" name="__codelineno-34-27" href="#__codelineno-34-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-34-28" name="__codelineno-34-28" href="#__codelineno-34-28"></a><span class="cp">#endif</span>
<a id="__codelineno-34-29" name="__codelineno-34-29" href="#__codelineno-34-29"></a>
<a id="__codelineno-34-30" name="__codelineno-34-30" href="#__codelineno-34-30"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-34-31" name="__codelineno-34-31" href="#__codelineno-34-31"></a><span class="w">    </span><span class="n">UFUNCTION</span><span class="p">(</span><span class="n">BlueprintCallable</span><span class="p">)</span><span class="w">        </span><span class="c1">//公开函数到蓝图</span>
<a id="__codelineno-34-32" name="__codelineno-34-32" href="#__codelineno-34-32"></a><span class="w">    </span><span class="n">FText</span><span class="w"> </span><span class="n">GetText</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-33" name="__codelineno-34-33" href="#__codelineno-34-33"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Text</span><span class="p">;</span>
<a id="__codelineno-34-34" name="__codelineno-34-34" href="#__codelineno-34-34"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-34-35" name="__codelineno-34-35" href="#__codelineno-34-35"></a><span class="w">    </span><span class="n">UFUNCTION</span><span class="p">(</span><span class="n">BlueprintCallable</span><span class="p">)</span>
<a id="__codelineno-34-36" name="__codelineno-34-36" href="#__codelineno-34-36"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">SetText</span><span class="p">(</span><span class="n">FText</span><span class="w"> </span><span class="n">InText</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-37" name="__codelineno-34-37" href="#__codelineno-34-37"></a><span class="w">        </span><span class="n">Text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InText</span><span class="p">;</span>
<a id="__codelineno-34-38" name="__codelineno-34-38" href="#__codelineno-34-38"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">MyTextBlock</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">              </span><span class="c1">//设置属性，当控件已经创建的时候，直接把值塞到控件里面</span>
<a id="__codelineno-34-39" name="__codelineno-34-39" href="#__codelineno-34-39"></a><span class="w">            </span><span class="n">MyTextBlock</span><span class="o">-&gt;</span><span class="n">SetText</span><span class="p">(</span><span class="n">Text</span><span class="p">);</span>
<a id="__codelineno-34-40" name="__codelineno-34-40" href="#__codelineno-34-40"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-34-41" name="__codelineno-34-41" href="#__codelineno-34-41"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-34-42" name="__codelineno-34-42" href="#__codelineno-34-42"></a><span class="k">protected</span><span class="o">:</span>
<a id="__codelineno-34-43" name="__codelineno-34-43" href="#__codelineno-34-43"></a><span class="w">    </span><span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditAnywhere</span><span class="p">,</span><span class="w"> </span><span class="n">BlueprintGetter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;GetText&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">BlueprintSetter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SetText&quot;</span><span class="p">)</span>
<a id="__codelineno-34-44" name="__codelineno-34-44" href="#__codelineno-34-44"></a><span class="w">    </span><span class="n">FText</span><span class="w"> </span><span class="n">Text</span><span class="p">;</span><span class="w">                         </span><span class="c1">//公开属性到编辑器</span>
<a id="__codelineno-34-45" name="__codelineno-34-45" href="#__codelineno-34-45"></a>
<a id="__codelineno-34-46" name="__codelineno-34-46" href="#__codelineno-34-46"></a><span class="w">    </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">STextBlock</span><span class="o">&gt;</span><span class="w"> </span><span class="n">MyTextBlock</span><span class="p">;</span><span class="w"> </span><span class="c1">//实际的Slate控件</span>
<a id="__codelineno-34-47" name="__codelineno-34-47" href="#__codelineno-34-47"></a><span class="p">};</span>
</code></pre></div>
<p><a class="glightbox" href="../Resources/image-20230601182230193.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230601182230193" src="../Resources/image-20230601182230193.png" /></a></p>
<p>在C++中，使用UMG的方法是：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="n">UWidget</span><span class="o">*</span><span class="w"> </span><span class="n">UMGWidget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoadObject</span><span class="o">&lt;</span><span class="n">UWidget</span><span class="o">&gt;</span><span class="p">(</span><span class="k">nullptr</span><span class="p">,</span><span class="w"> </span><span class="n">TEXT</span><span class="p">(</span><span class="s">&quot;{AssetPath}&quot;</span><span class="p">));</span><span class="w">                </span><span class="c1">//从资产加载，也可以NewObject</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">SWidget</span><span class="o">&gt;</span><span class="w"> </span><span class="n">SlateWidget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UMGWidget</span><span class="o">-&gt;</span><span class="n">TakeWidget</span><span class="p">();</span><span class="w">                             </span><span class="c1">//该操作会创建一个新的SWidget，</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">SWidget</span><span class="o">&gt;</span><span class="w"> </span><span class="n">CachedSlateWidget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UMGWidget</span><span class="o">-&gt;</span><span class="n">GetCachedWidget</span><span class="p">();</span><span class="w">                  </span><span class="c1">//获取上一次创建的SWidget</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="c1">//之后再使用Slate的使用方式</span>
</code></pre></div>
<h3 id="_22">生命周期管理<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<p><strong>UWidget</strong> 走的是 <strong>UObject</strong> 的垃圾回收，它持有了 <strong>SWidget</strong> 的共享指针，为了保证控件在显示时（<code>TSharedPtr&lt;SWidget&gt;</code>还存在时）， <strong>UWidget</strong> 不会被当成垃圾回收，UMG使用了一个继承自 <strong>FGCObject</strong> 的控件 <strong>SObjectWidget</strong> 对 <strong>UWidget</strong> 增加了引用</p>
<p><a class="glightbox" href="../Resources/image-20230602103618309.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20230602103618309" src="../Resources/image-20230602103618309.png" /></a></p>
<p>再回到上面的示例代码中，可以了解到，调用<code>UWidget::TakeWidget()</code>得到的并不是 <code>UWidget::RebuildWidget()</code>中创建的控件，而是对其又用 <strong>SObjectWidget</strong> 包裹了一层，它们在创建过程中的层次关系如下：</p>
<p><a class="glightbox" href="../Resources/%E5%9B%BE%E7%89%872.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="图片2" src="../Resources/%E5%9B%BE%E7%89%872.png" /></a></p>
<p>在销毁时，它们的释放顺序如下：</p>
<p><a class="glightbox" href="../Resources/%E5%9B%BE%E7%89%873.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="图片3" src="../Resources/%E5%9B%BE%E7%89%873.png" /></a></p>
<ul>
<li><strong>SObjectWidget</strong> 继承自 <strong>FGCObject</strong> ，它会添加对UWidget的引用，保证 <strong>SObjectWidget</strong> 存在时， <strong>UWidget</strong> 不会被GC</li>
<li>当控件开始销毁时， <strong>SObjectWidget</strong> 的引用计数为0会被销毁，此时会解除对 <strong>UWidget</strong> 的引用</li>
<li>当 <strong>UWidget</strong> 的引用为0，则会在下一次垃圾回收时将其释放，此时才会释放其持有的 <strong>SWidget</strong> 共享指针</li>
</ul>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime" title="2023年12月1日 17:12:52">2023-12-01 17:12:52</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="创建日期">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime" title="2023年6月8日 15:58:09">2023-06-08 15:58:09</span>
  </span>

    
    
    
  </aside>


  




  <h2 id="__comments">评论</h2>
  <!-- Insert generated snippet here -->
  <script src="https://giscus.app/client.js"
    data-repo="Italink/ModernGraphicsEngineGuide"
    data-repo-id="R_kgDOIPtbiQ"
    data-category-id="DIC_kwDOIPtbic4CTxOk"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="preferred_color_scheme"
    data-lang="zh-CN"
    crossorigin="anonymous"
    async>
  </script>
  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "dark" : "light"
      giscus.setAttribute("data-theme", theme) 
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "dark" : "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../0.%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 0 - 基础编程">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                0 - 基础编程
              </div>
            </div>
          </a>
        
        
          
          <a href="../2.%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/" class="md-footer__link md-footer__link--next" aria-label="下一页: 2 - 插件开发">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                2 - 插件开发
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2016 - 2023 Italink
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Italink" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.zhihu.com/people/italink" target="_blank" rel="noopener" title="www.zhihu.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.721 0C2.251 0 0 2.25 0 5.719V18.28C0 21.751 2.252 24 5.721 24h12.56C21.751 24 24 21.75 24 18.281V5.72C24 2.249 21.75 0 18.281 0zm1.964 4.078q-.408 1.096-.68 2.11h4.587c.545-.006.445 1.168.445 1.171H9.384a58 58 0 0 1-.112 3.797h2.712c.388.023.393 1.251.393 1.266H9.183a9.2 9.2 0 0 1-.408 2.102l.757-.604c.452.456 1.512 1.712 1.906 2.177.473.681.063 2.081.063 2.081l-2.794-3.382c-.653 2.518-1.845 3.607-1.845 3.607-.523.468-1.58.82-2.64.516 2.218-1.73 3.44-3.917 3.667-6.497H4.491c0-.015.197-1.243.806-1.266h2.71c.024-.32.086-3.254.086-3.797H6.598c-.136.406-.158.447-.268.753-.594 1.095-1.603 1.122-1.907 1.155.906-1.821 1.416-3.6 1.591-4.064.425-1.124 1.671-1.125 1.671-1.125M13.078 6h6.377v11.33h-2.573l-2.184 1.373-.401-1.373h-1.219zm1.313 1.219v8.86h.623l.263.937 1.455-.938h1.456v-8.86z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.instant", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "announce.dismiss"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>